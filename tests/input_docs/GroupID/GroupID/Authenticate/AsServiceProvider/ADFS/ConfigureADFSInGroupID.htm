<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="_Skins_Stealthbits_WebsiteSkin" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="Sb-print" data-mc-toc-path="Authenticate|As Service Provider|AD FS">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" />
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Configure the AD FS Provider In GroupID</title>
        <link href="../../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="complementary" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="Main navigation and search" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../Introduction.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <h1>Configure the AD FS Provider In Directory Manager</h1>
                                    <p>To configure a SAML provider in <span class="mc-variable GroupID.Product variable">Directory Manager</span>, you have to specify the following:</p>
                                    <ul>
                                        <li>
                                            <p>Issuer URL</p>
                                        </li>
                                        <li>
                                            <p>IDP Login URL</p>
                                        </li>
                                        <li>
                                            <p>Token signing certificate</p>
                                        </li>
                                        <li>
                                            <p>An image for the identity provider</p>
                                        </li>
                                        <li>
                                            <p>Advanced configurations</p>
                                        </li>
                                    </ul>
                                    <h2><a name="Configur"></a>Configure the AD FS Provider in Directory Manager</h2>
                                    <p>Follow the steps to configure the AD FS provider in <span class="mc-variable GroupID.Product variable">Directory Manager</span>.</p>
                                    <p class="Step-Reset" data-mc-autonum="Step 1 – "><span class="autonumber"><span class="Step">Step 1 – </span></span>In <span class="mc-variable GroupID.Product variable">Directory Manager</span> Authenticate,  click the <b>SAML Providers</b> tab. </p>
                                    <p class="Step" data-mc-autonum="Step 2 – "><span class="autonumber"><span class="Step">Step 2 – </span></span>On the SAML Providers page, click <b>New Provider</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 3 – "><span class="autonumber"><span class="Step">Step 3 – </span></span>On the Create New Provider page, enter a name for the provider.</p>
                                    <p class="Step" data-mc-autonum="Step 4 – "><span class="autonumber"><span class="Step">Step 4 – </span></span>Make sure the Client box displays the name of the <span class="mc-variable GroupID.Product variable">Directory Manager</span> client for which you generated the Entity ID/Audience URL and provided that in AD FS.<br />Keep this page open while we copy configurations from AD FS and provide them here.</p>
                                    <h2>Provide Issuer URL</h2>
                                    <p>The issuer URL is provided by the federation service, i.e., AD FS. Copy this URL from AD FS and provide it in <span class="mc-variable GroupID.Product variable">Directory Manager</span>.</p>
                                    <p class="Step-Reset" data-mc-autonum="Step 1 – "><span class="autonumber"><span class="Step">Step 1 – </span></span>In the AD FS console, right-click <b>Service</b> and select <b>Edit Federation Service Properties</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 2 – "><span class="autonumber"><span class="Step">Step 2 – </span></span>On the Federation Service Properties dialog box, copy the URL displayed in the Federation Service Identifier box and paste it in the Issuer box on the Create New Provider page in <span class="mc-variable GroupID.Product variable">Directory Manager</span>.</p>
                                    <h3><a name="Provide"></a>Provide IDP Login URL</h3>
                                    <p>The IDP Login URL is the URL of the AD FS sign-in page. Follow the steps to fetch and enter IDP Login URL.</p>
                                    <p class="Step-Reset" data-mc-autonum="Step 1 – "><span class="autonumber"><span class="Step">Step 1 – </span></span>Launch the AD FS login page and copy the URL displayed in the address bar.</p>
                                    <p class="Step" data-mc-autonum="Step 2 – "><span class="autonumber"><span class="Step">Step 2 – </span></span>We only need the initial part of the URL, up to <i>ls</i>. Copy it and paste it in the IDP Login URL box on the Create New Provider page. </p>
                                    <h3>Get Token-Signing Certificate</h3>
                                    <p>The next step is to get the token-signing certificate from AD FS and provide it in <span class="mc-variable GroupID.Product variable">Directory Manager</span>. Follow the steps to do so.</p>
                                    <p class="Step-Reset" data-mc-autonum="Step 1 – "><span class="autonumber"><span class="Step">Step 1 – </span></span>Go to the AD FS console and click <b>Certificates</b>. The certificates are displayed.</p>
                                    <p class="Step" data-mc-autonum="Step 2 – "><span class="autonumber"><span class="Step">Step 2 – </span></span>Double-click the token-signing certificate to open its properties. </p>
                                    <p class="Step" data-mc-autonum="Step 3 – "><span class="autonumber"><span class="Step">Step 3 – </span></span>On the Certificate Properties dialog box,	go to the Details tab and click the <b>Copy to File</b> button to launch the Certificate Export Wizard.</p>
                                    <p class="Step" data-mc-autonum="Step 4 – "><span class="autonumber"><span class="Step">Step 4 – </span></span>Read the welcome message and click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 5 – "><span class="autonumber"><span class="Step">Step 5 – </span></span>On the Export File Format page, select the <b>Base-64 encoded X.509 (.CER)</b> option button and click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 6 – "><span class="autonumber"><span class="Step">Step 6 – </span></span>On the File to Export page, specify a name for the certificate file and click <b>Browse</b> to specify a location to save it. Then click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 7 – "><span class="autonumber"><span class="Step">Step 7 – </span></span>On the next page, click <b>Finish</b> to complete the wizard.</p>
                                    <p class="Step" data-mc-autonum="Step 8 – "><span class="autonumber"><span class="Step">Step 8 – </span></span>Open the certificate file in Notepad and select the entire content. Copy this certificate and paste it in the IDP Certificate box on the Create New Provider page in <span class="mc-variable GroupID.Product variable">Directory Manager</span>. Make sure there is no trailing space after the dashes that mark the end of the certificate.</p>
                                    <h3><a name="Upload"></a>Upload an Image for the Identity Provider</h3>
                                    <p>When AD FS is configured with a <span class="mc-variable GroupID.Product variable">Directory Manager</span> client, say the <span class="mc-variable GroupID.Product variable">Directory Manager</span> portal <i>Wizard</i>, it will be available on <i>Wizard’s</i> login page for single sign-on. You can choose to display the AD FS option as an image or as a button.</p>
                                    <p>To display the AD FS option as an image, you have to upload an image for it. On the Create New Provider page, use the Browse button under Identity Provider Image to upload an image for AD FS.</p>
                                    <p class="Note-1" data-mc-autonum="NOTE: "><span class="autonumber"><span class="Note-1">NOTE: </span></span>Supported image formats: .jpg, .bmp, .png, .gif<br />Required image file dimensions: 210 x 60 pixels<br /></p>
                                    <p>If you do not upload an image, AD FS authentication will be shown as a button. This button would have the same name as you entered  in the Name box on the Create New Provider page.</p>
                                    <p>Users can click the AD FS image or the button on the login page of the <span class="mc-variable GroupID.Product variable">Directory Manager</span> portal <i>Wizard</i> for single sign-on.</p>
                                    <h3><a name="Specify"></a>Specify Advanced Configurations</h3>
                                    <p>Next, specify some advanced configurations for the identity provider. Expand the Advanced section on the Create New Provider page and provide the information as follows:</p>
                                    <p class="Step-Reset" data-mc-autonum="Step 1 – "><span class="autonumber"><span class="Step">Step 1 – </span></span>Make sure that <i>RSA-SHA-256</i> is selected in the Response Signing Method box.</p>
                                    <p class="Step" data-mc-autonum="Step 2 – "><span class="autonumber"><span class="Step">Step 2 – </span></span>The Disable GroupID Authentication option indicates whether to display the <span class="mc-variable GroupID.Product variable">Directory Manager</span> authentication login on the <span class="mc-variable GroupID.Product variable">Directory Manager</span> client's login page ( i.e., Wizard portal’s login page in our example).</p>
                                    <ul>
                                        <li>
                                            <p>By default, ‘No’ is selected, which means that when users access the <span class="mc-variable GroupID.Product variable">Directory Manager</span> client's login page, they will be shown the <span class="mc-variable GroupID.Product variable">Directory Manager</span> login and password option along with  the identity provider’s button.</p>
                                        </li>
                                        <li>
                                            <p>Selecting ‘Yes’ means that the <span class="mc-variable GroupID.Product variable">Directory Manager</span> login and password option will not be available on the <span class="mc-variable GroupID.Product variable">Directory Manager</span> client's login page. Moreover, when a single identity store and a single SAML provider is configured, the login page for the provider is displayed rather than the <span class="mc-variable GroupID.Product variable">Directory Manager</span> client's login page. </p>
                                        </li>
                                    </ul>
                                    <p class="Step" data-mc-autonum="Step 3 – "><span class="autonumber"><span class="Step">Step 3 – </span></span>Select <i>Post</i> in the Request Binding drop-down list.<br />To verify that you have selected the correct binding type, do the following:</p>
                                    <ol>
                                        <li value="1">
                                            <p>In the AD FS console click <b>Relying Party Trust</b> in the left pane; the middle pane displays the relying party trusts already configured.</p>
                                        </li>
                                        <li value="2">
                                            <p>Double-click the relying party trust that you created for the  <span class="mc-variable GroupID.Product variable">Directory Manager</span> portal <i>Wizard</i>. This launches the Properties dialog box for the relying party trust.</p>
                                        </li>
                                        <li value="3">
                                            <p>Click the <b>Endpoints</b> tab and confirm that the binding type is <i>POST</i>.</p>
                                        </li>
                                    </ol>
                                    <p class="Step" data-mc-autonum="Step 4 – "><span class="autonumber"><span class="Step">Step 4 – </span></span>In AD FS, we configured an Active Directory attribute that the identity provider will use for authenticating users (see step 16 in the <a href="ConfigureRelayingPartyTrust.htm#Configur" target="_parent" title="Configure Relaying Party Trust in AD FS" alt="Configure Relaying Party Trust in AD FS" class="MCXref xref">Configure Relaying Party Trust in AD FS</a> topic). In our example, we used the UPN attribute that stores the user principal name. Now in the Advanced section, we have to refer to this attribute.<br />In the Identity Location list, select the <i>Identity is an attribute element</i> option.<br /></p>
                                    <p class="Step" data-mc-autonum="Step 5 – "><span class="autonumber"><span class="Step">Step 5 – </span></span>On selecting it, the Identity Location Attribute box is displayed. <br />The attribute location will be in the form of a URL. Get this URL from AD FS.</p>
                                    <ol>
                                        <li value="1">
                                            <p>In the AD FS console, click <b>Claim Descriptions</b> in the left pane and then select the Active Directory attribute you specified for authentication. In our example, it is the UPN attribute.</p>
                                        </li>
                                        <li value="2">
                                            <p>Double-click the attribute to open its properties.</p>
                                        </li>
                                        <li value="3">
                                            <p>On the Attribute Properties dialog box, copy the URL displayed in the Claim type box and paste it in the Identity Location Attribute box.</p>
                                        </li>
                                    </ol>
                                    <p class="Step" data-mc-autonum="Step 6 – "><span class="autonumber"><span class="Step">Step 6 – </span></span>With all configurations completed, click the <b>Create Provider</b> button. The identity provider, i.e., AD FS, is created and displayed on the SAML Providers page.</p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>