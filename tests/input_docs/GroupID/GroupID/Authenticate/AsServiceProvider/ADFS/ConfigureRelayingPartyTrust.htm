<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="_Skins_Stealthbits_WebsiteSkin" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="Sb-print" data-mc-toc-path="Authenticate|As Service Provider|AD FS">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" />
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Configure Relaying Party Trust in AD FS</title>
        <link href="../../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="complementary" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="Main navigation and search" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../Introduction.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <h1>Configure Relaying Party Trust in AD FS</h1>
                                    <p>In AD FS, you have to configure the <span class="mc-variable GroupID.Product variable">Directory Manager</span> client with which you want to set up AD FS. You also have to specify the claim rules for authentication.</p>
                                    <h2><a name="Configur"></a>Configure Relaying Party Trust in AD FS</h2>
                                    <p>Follow the steps to configure relaying party trust in AD FS.</p>
                                    <p class="Step-Reset" data-mc-autonum="Step 1 – "><span class="autonumber"><span class="Step">Step 1 – </span></span>Launch the AD FS console. In the left pane, select <b>AD FS &gt; Trust Relationships</b>. Right-click <b>Relying Party Trusts</b> and click <b>Add Relying Party Trust</b> on the shortcut menu.<br />The Add Relying Party Trust wizard opens to the Welcome page.</p>
                                    <p class="Step" data-mc-autonum="Step 2 – "><span class="autonumber"><span class="Step">Step 2 – </span></span>Read the welcome message and click <b>Start</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 3 – "><span class="autonumber"><span class="Step">Step 3 – </span></span>Use the options on the Select Data Source page to either import relying party trust data from a file, such as a metadata file, or enter the information manually.<br />To enter information manually, select the <b>Enter data about the relying party manually</b> option and click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 4 – "><span class="autonumber"><span class="Step">Step 4 – </span></span>On the Specify Display Name page, specify a friendly display name for this configuration in the Display name box. Then enter any additional notes in the Notes box and click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 5 – "><span class="autonumber"><span class="Step">Step 5 – </span></span>To use the SAML 2.0 protocol as profile, select the <b>AD FS profile</b> option button on the Choose Profile page and click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 6 – "><span class="autonumber"><span class="Step">Step 6 – </span></span>On the Configure Certificate page, click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 7 – "><span class="autonumber"><span class="Step">Step 7 – </span></span>On the Configure URL page, select the <b>Enable support for the SAML 2.0 Web SSO protocol</b> option button. Then in the Relying party SAML 2.0 SSL service URL box, provide the consumer URL you generated for the <span class="mc-variable GroupID.Product variable">Directory Manager</span> client. See the <a href="GenerateURLs.htm#Generate" target="_parent" title="Generate the Consumer URL for a Directory Manager Client" alt="Generate the Consumer URL for a Directory Manager Client" class="MCXref xref">Generate the Consumer URL for a Directory Manager Client</a> topic.<br />The consumer URL is the relying party trust URL, used by AD FS to authenticate. Click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 8 – "><span class="autonumber"><span class="Step">Step 8 – </span></span>On the Configure Identifiers page, use the Relying party trust identifier box to provide the audience URL you generated for the <span class="mc-variable GroupID.Product variable">Directory Manager</span> client. Click <b>Add</b> next to this box and then click <b>Next</b>.<br />See the <a href="GenerateURLs.htm#Generate2" target="_parent" title="Generate Entity ID/Audience URL" alt="Generate Entity ID/Audience URL" class="MCXref xref">Generate Entity ID/Audience URL</a> topic.</p>
                                    <p class="Step" data-mc-autonum="Step 9 – "><span class="autonumber"><span class="Step">Step 9 – </span></span>Use the Configure Multi-factor Authentication Now? page to configure multi-factor authentication. At present, we will not configure it, so select the <b>I do not want to configure multi-factor authentications settings for this relying party trust at this time</b> option button and click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 10 – "><span class="autonumber"><span class="Step">Step 10 – </span></span>Use the Choose Issuance Authorization Rules page to permit all users to get authenticated on the relying party trust using AD FS. User credentials will be parsed with Active Directory.<br />Select the <b>Permit all users to access this relying party</b> option button and click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 11 – "><span class="autonumber"><span class="Step">Step 11 – </span></span>Use the tabs on the Ready to Add Trust page to review some preconfigured settings; then click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 12 – "><span class="autonumber"><span class="Step">Step 12 – </span></span>Click <b>Close</b> on the Finish page to complete the wizard. The wizard closes and the Edit Claim Rules dialog box is displayed, where you have to specify claim rules for authentication.</p>
                                    <p class="Step" data-mc-autonum="Step 13 – "><span class="autonumber"><span class="Step">Step 13 – </span></span>On the Edit Claim Rules dialog box, the Issuance Transform Rules option correlates to the option of authenticating using an Active Directory attribute. Click <b>Add Rule</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 14 – "><span class="autonumber"><span class="Step">Step 14 – </span></span>To add a rule, select <b>Transform an Incoming Claim</b> from the Claim rule template drop-down list on the Select Rule Template page and click <b>Next</b>.</p>
                                    <p class="Step" data-mc-autonum="Step 15 – "><span class="autonumber"><span class="Step">Step 15 – </span></span>On the Configure Rule page, specify a rule name in the Claim rule name box.</p>
                                    <p class="Step" data-mc-autonum="Step 16 – "><span class="autonumber"><span class="Step">Step 16 – </span></span>In the Incoming claim type and Outgoing claim type boxes, select an Active Directory attribute for authentication, such as the UPN attribute. The incoming and outgoing claim types should be the same as we will not specify a different text or different data for the logon process. It will be the exact user principal name for authentication.</p>
                                    <p class="Step" data-mc-autonum="Step 17 – "><span class="autonumber"><span class="Step">Step 17 – </span></span>Make sure that the <b>Pass through all claim values</b> option is selected; then click <b>Finish</b>. The new rule is configured and displayed on the Issuance Transform Rules tab.</p>
                                    <p class="Step" data-mc-autonum="Step 18 – "><span class="autonumber"><span class="Step">Step 18 – </span></span>Click the <b>Issuance Authorization Rules</b> tab and notice that the issuance authorization rule is already completed.</p>
                                    <p class="Step" data-mc-autonum="Step 19 – "><span class="autonumber"><span class="Step">Step 19 – </span></span>Click the <b>Delegation Authorization Rules</b> tab. We do not need to delegate, so click <b>Apply</b> and then <b>OK</b>. The AD FS console is displayed with the new relying party trust added.<br /></p>
                                    <p>The next step is to configure the AD FS provider in <span class="mc-variable GroupID.Product variable">Directory Manager</span>. See the <a href="ConfigureADFSInGroupID.htm" target="_parent" title="Configure the AD FS Provider In Directory Manager" alt="Configure the AD FS Provider In Directory Manager" class="MCXref xref">Configure the AD FS Provider In Directory Manager</a> topic.</p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>