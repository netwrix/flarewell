<!DOCTYPE html>
<html lang="en-us" class="js csstransforms3d _Skins_HTML5___Side_Navigation" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Home Page|Integration Guide|Provisioning">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Resources/TableStyles/Sb Table 1.css" rel="stylesheet" data-mc-stylesheet-type="table" /><title>
              
              Compute a Resource Type's Provisioning Arguments
              </title>
        <link href="../../../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body class="" data-url="../../../../integration-guide/provisioning/how-tos/argumentsexpression/">
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../../index.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <section id="body">
                                        <div id="body-inner">
                                            <h1>
                                                <div>
              
              Compute a Resource Type's Provisioning Arguments
              </div>
                                            </h1>
                                            <p>This guide gives examples to understand how to configure a resource type's <code>ArgumentsExpression</code> attribute to compute a resource type's provisioning arguments, for example the identifier of the workflow to launch, or the identifier of the record to copy.</p>
                                            <h2 id="examples">Examples</h2>
                                            <p>This option is used to use provisioning orders to compute useful arguments.</p>
                                            <p>Most standard situations use only one workflow per action type on a resource (addition, update, deletion). But in some more complex situations (like using multi records), several workflows are available for one type of action. As the configuration JSON file of an <a href="../../../connectors/references-connectors/internalworkflow/index.html" target="_parent" title="InternalWorkflow" alt="InternalWorkflow" class="MCXref xref">InternalWorkflow</a> connection cannot contain expressions, a resource type can be configured with the <code>ArgumentsExpression</code> attribute to explicit the arguments of provisioning orders, based on conditions and variables.</p>
                                            <p>The following example computes the identifier of the workflow to launch, based on the provisioning order as a variable (the returned value depends here mostly on the type of change):</p><pre class="xml" xml:space="preserve"><code>
&lt;ResourceType Identifier="HR_Person_To_Directory_UserRecord" DisplayName_L1="User Record (from HR)" DisplayName_L2="Fiche de collaborateur (source RH)" Category="HR" Policy="Default" TargetEntityType="Directory_UserRecord" SourceEntityType="HR_Person" CorrelateMultipleResources="true" <b>ArgumentsExpression</b>="C#:resource:
    
  if ((provisioningOrder == null) || (provisioningOrder.ChangeType.IsNone())) {
    return null;
  }

  var arguments = new System.Collections.Generic.Dictionary&lt;string, string&gt;();
  var workflowIdentifier = "Directory_User_UpdateFromHR";

  if ((provisioningOrder.ChangeType.IsAdded()) || (provisioningOrder.HasChanged("Employee_Id"))) {
    workflowIdentifier = "Directory_User_StartInternalByHR";
  }

  else if (provisioningOrder.ChangeType.IsDeleted()) {
    workflowIdentifier = "Directory_User_DeleteFromHR";
  }

  arguments.Add("WorkflowIdentifier", workflowIdentifier);
  return arguments;" /&gt;
</code></pre>
                                            <h4 id="resourceidtocopy">ResourceIdToCopy</h4>
                                            <p>Now consider a record creation for a given identity, inside a multi-record organization. Suppose that records are defined by their position and location, while other properties are the same for all records (usually the identity's personal data like the name and birth date). When creating a new record for an existing identity, you will want to copy an existing record from the database to modify only the values specific to the new record.</p>
                                            <p>The following example computes the identifier of the record to copy, if the identity has already any:</p><pre class="xml" xml:space="preserve"><code>
&lt;ResourceType Identifier="HR_Person_To_Directory_UserRecord" DisplayName_L1="User Record (from HR)" DisplayName_L2="Fiche de collaborateur (source RH)" Category="HR" Policy="Default" TargetEntityType="Directory_UserRecord" SourceEntityType="HR_Person" CorrelateMultipleResources="true" <b>ArgumentsExpression</b>="C#:resource:

if ((provisioningOrder == null) || (provisioningOrder.ChangeType.IsNone())) {
  return null;
}

var arguments = new System.Collections.Generic.Dictionary&lt;string, string&gt;();

if (provisioningOrder.TryGetScalar("EmployeeId", out var employeeId) &amp;&amp; (employeeId != null)) {
  
  var resources = queryHandler.Select&lt;Directory_UserRecord&gt;("Select Id Where EmployeeId="\" + employeeId.ToString() + "\"");

  if (resources.Any()) {
    arguments.Add("<b>ResourceIdToCopy</b>", resources.FirstOrDefault().Id.ToString());
  }
}
  
return arguments;" /&gt;
</code></pre>
                                            <h2 id="attributes-provided-by-usercube">Attributes Provided by Usercube</h2>
                                            <table style="mc-table-style: url('../../../../../Resources/TableStyles/Sb Table 1.css');margin-left: auto;margin-right: auto;" class="TableStyle-Sb_Table_1" cellspacing="21">
                                                <col class="TableStyle-Sb_Table_1-Column-Column1" />
                                                <col class="TableStyle-Sb_Table_1-Column-Column1" />
                                                <thead>
                                                    <tr class="TableStyle-Sb_Table_1-Head-Header1">
                                                        <th style="font-size: 11pt;" class="TableStyle-Sb_Table_1-HeadE-Column1-Header1">
                                                            <p>Name</p>
                                                        </th>
                                                        <th style="font-size: 11pt;" class="TableStyle-Sb_Table_1-HeadD-Column1-Header1">
                                                            <p>Details</p>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body1">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyB-Column1-Body1">
                                                            <p>ProvisioningOrder.ChangeType</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyA-Column1-Body1">
                                                            <p><strong>Type</strong>
                                                                <br />String<br /><br /><strong>Description</strong><br />Action of the provisioning order.</p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <h2 id="methods-provided-by-usercube">Methods Provided by Usercube</h2>
                                            <table style="mc-table-style: url('../../../../../Resources/TableStyles/Sb Table 1.css');margin-left: auto;margin-right: auto;" class="TableStyle-Sb_Table_1" cellspacing="21">
                                                <col class="TableStyle-Sb_Table_1-Column-Column1" />
                                                <col class="TableStyle-Sb_Table_1-Column-Column1" />
                                                <thead>
                                                    <tr class="TableStyle-Sb_Table_1-Head-Header1">
                                                        <th style="font-size: 11pt;" class="TableStyle-Sb_Table_1-HeadE-Column1-Header1">
                                                            <p>Name</p>
                                                        </th>
                                                        <th style="font-size: 11pt;" class="TableStyle-Sb_Table_1-HeadD-Column1-Header1">
                                                            <p>Details</p>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body1">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyE-Column1-Body1">
                                                            <p>IsNone</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyD-Column1-Body1">
                                                            <p><strong>Type</strong>
                                                                <br />Boolean<br /><br /><strong>Usage</strong><br />provisioningOrder.ChangeType.IsNone()<br /><br /><strong>Description</strong><br /><code>True</code> when the provisioning order demands no change.<br /><strong>Note:</strong> this method can be used only on <code>ChangeType</code>.</p>
                                                        </td>
                                                    </tr>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body2">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyE-Column1-Body2">
                                                            <p>IsAdded</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyD-Column1-Body2">
                                                            <p><strong>Type</strong>
                                                                <br />Boolean<br /><br /><strong>Usage</strong><br />provisioningOrder.ChangeType.IsAdded()<br /><br /><strong>Description</strong><br /><code>True</code> when the provisioning order demands a resource addition.<br /><strong>Note:</strong> this method can be used only on <code>ChangeType</code>.</p>
                                                        </td>
                                                    </tr>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body1">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyE-Column1-Body1">
                                                            <p>IsUpdated</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyD-Column1-Body1">
                                                            <p><strong>Type</strong>
                                                                <br />Boolean<br /><br /><strong>Usage</strong><br />provisioningOrder.ChangeType.IsUpdated()<br /><br /><strong>Description</strong><br /><code>True</code> when the provisioning order demands a resource update.<br /><strong>Note:</strong> this method can be used only on <code>ChangeType</code>.</p>
                                                        </td>
                                                    </tr>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body2">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyE-Column1-Body2">
                                                            <p>IsDeleted</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyD-Column1-Body2">
                                                            <p><strong>Type</strong>
                                                                <br />Boolean<br /><br /><strong>Usage</strong><br />provisioningOrder.ChangeType.IsDeleted()<br /><br /><strong>Description</strong><br /><code>True</code> when the provisioning order demands a resource deletion.<br /><strong>Note:</strong> this method can be used only on <code>ChangeType</code>.</p>
                                                        </td>
                                                    </tr>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body1">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyE-Column1-Body1">
                                                            <p>HasChanged</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyD-Column1-Body1">
                                                            <p><strong>Type</strong>
                                                                <br />Boolean<br /><br /><strong>Usage</strong><br />provisioningOrder.HasChanged("PropertyName")<br /><br /><strong>Description</strong><br /><code>True</code> when the provisioning order demands a change on a given property.</p>
                                                        </td>
                                                    </tr>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body2">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyE-Column1-Body2">
                                                            <p>TryGetScalar</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyD-Column1-Body2">
                                                            <p><strong>Type</strong>
                                                                <br />Boolean<br /><br /><strong>Usage</strong><br />provisioningOrder.TryGetScalar("PropertyName", out var myChange)<br /><br /><strong>Description</strong><br /><code>True</code> when <code>PropertyName</code> is a scalar property whose value is changed by the provisioning order. <code>myChange</code> takes the new value of <code>PropertyName</code> changed by the provisioning order.</p>
                                                        </td>
                                                    </tr>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body1">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyE-Column1-Body1">
                                                            <p>TryGetAddedNavigations</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyD-Column1-Body1">
                                                            <p><strong>Type</strong>
                                                                <br />Boolean<br /><br /><strong>Usage</strong><br />provisioningOrder.TryGetAddedNavigations("PropertyName", out var myChanges)<br /><br /><strong>Description</strong><br /><code>True</code> when <code>PropertyName</code> is a navigation property to which new values are added by the provisioning order. <code>myChanges</code> takes the list of values of <code>PropertyName</code> added by the provisioning order.</p>
                                                        </td>
                                                    </tr>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body2">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyB-Column1-Body2">
                                                            <p>TryGetRemovedNavigations</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyA-Column1-Body2">
                                                            <p><strong>Type</strong>
                                                                <br />Boolean<br /><br /><strong>Usage</strong><br />provisioningOrder.TryGetRemovedNavigations("PropertyName", out var myChanges)<br /><br /><strong>Description</strong><br /><code>True</code> when <code>PropertyName</code> is a navigation property from which some values are removed by the provisioning order. <code>myChanges</code> takes the list of values of <code>PropertyName</code> removed by the provisioning order.</p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </section>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>