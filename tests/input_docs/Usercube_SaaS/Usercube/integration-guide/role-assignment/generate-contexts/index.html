<!DOCTYPE html>
<html lang="en-us" class="js csstransforms3d _Skins_HTML5___Side_Navigation" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Home Page|Integration Guide|Role Assignment">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>
              
              Generate Contexts
              </title>
        <link href="../../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body class="" data-url="../../../integration-guide/role-assignment/generate-contexts/">
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../index.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <section id="body">
                                        <div id="body-inner">
                                            <h1>
                                                <div>
              
              Generate Contexts
              </div>
                                            </h1>
                                            <p>A context is a set of dimension-value pairs computed using the <a href="../../toolkit/xml-configuration/provisioning/contextrule/index.html" target="_parent" title="ContextRule" alt="ContextRule" class="MCXref xref">
              
              Context Rule
              </a> or the combination of a context rule and the <a href="../../toolkit/xml-configuration/provisioning/recordsection/index.html" target="_parent" title="RecordSection" alt="RecordSection" class="MCXref xref">
              
              Record Section
              </a> if record sections are configured.</p>
                                            <p>A context is used to compute the role assignments for an identity by verifying that the dimension-value pairs meet the role criteria.</p>
                                            <h2 id="basic-context-generation">Basic Context Generation</h2>
                                            <p>When using only a context rule without a record section, the context generation is straightforward: a set of dimension-value pairs is created by computing the value of the dimension bindings on the <a href="../../toolkit/xml-configuration/provisioning/contextrule/index.html" target="_parent" title="ContextRule" alt="ContextRule" class="MCXref xref">
              
              Context Rule
              </a>.</p>
                                            <blockquote>
                                                <p>For example, the following context rule defines guests' contexts based on their start date, end date, and company.</p><pre class="xml" xml:space="preserve"><code>
&lt;ContextRule Identifier="ContextRuleForGuest" DisplayName_L1="ContextRuleForGuest" Policy="Default" ResourcesStartBinding="Directory_Guest:StartDate" ResourcesEndBinding="Directory_Guest:EndDate" SourceEntityType="Directory_Guest" BA="Directory_Guest:Company" /&gt;
</code></pre>
                                            </blockquote>
                                            <h2 id="identity-context-generation">Identity Context Generation</h2>
                                            <p>As described in the <a href="../../identity-management/index.html" target="_parent" title="Identity Management" alt="Identity Management" class="MCXref xref">Identity Management</a>, identities are complex to model. Records were introduced to tackle this complexity by allowing multiple positions for the same identity.</p>
                                            <p><a href="../../toolkit/xml-configuration/provisioning/recordsection/index.html" target="_parent" title="RecordSection" alt="RecordSection" class="MCXref xref">
              
              Record Section
              </a> go further by modeling the relationship between positions.
Indeed with record sections, it is possible to define:</p>
                                            <ul>
                                                <li>what are the shared properties between all positions?</li>
                                                <li>what are the properties unique to each position?</li>
                                                <li>what happens when there is a time gap between two positions, should the previous be extended or should the future position be used to fill the gap?</li>
                                                <li>what happens when a position property value is not defined?</li>
                                            </ul>
                                            <p>Before illustrating how the record sections can be configured to handle most cases of position management, here is the background situation for the examples that follow:</p>
                                            <ul>
                                                <li>A position is defined by a <code>JobTitle</code>, a <code>Location</code>, and a <code>Department</code>, all other properties belong to the identity and are shared between all positions.</li>
                                                <li>Dimensions are <code>Category</code>, <code>JobTitle</code>, <code>Location</code>, and <code>Department</code>.</li>
                                                <li>Each position will have an <code>Id</code>.</li>
                                                <li><code>Sx</code> represents the start date of the position, and x is the <code>Id</code> of the position.</li>
                                                <li><code>Ex</code> represents the end date of the position, and x is the <code>Id</code> of the position.</li>
                                                <li><code>Cs</code> represents the contract start date.</li>
                                                <li><code>Ce</code> represents the contract end date.</li>
                                            </ul>
                                            <p>The following configuration shows the context rule that will be used for the examples.</p><pre class="xml" xml:space="preserve"><code>
&lt;ContextRule Identifier="ContextRuleUserToRecord" DisplayName_L1="ContextRuleUserToRecord" Policy="Default" ResourcesBinding="Records" ResourcesStartBinding="StartDate" ResourcesEndBinding="EndDate" B0="Directory_UserRecord:Department" B1="Directory_UserRecord:JobTitle" B2="Directory_UserRecord:Location" B3="Directory_UserRecord.Category" SourceEntityType="Directory_User" /&gt;
</code></pre>
                                            <div class="notices note">
                                                <p>The context rule start/end dates bindings and expressions won't have any effect on the computation, they are overridden by the record sections dates properties.</p>
                                            </div>
                                            <h3 id="configuration-of-basic-record-sections">Configuration of basic record sections</h3><pre class="xml" xml:space="preserve"><code>
<em>Default section:</em>
&lt;RecordSection Identifier="Directory_UserRecord_Default" DisplayName_L1="Contract Properties" SourceEntityType="Directory_User" ResourceEntityType="Directory_UserRecord" StartProperty="ContractStartDate" EndProperty="ContractEndDate"&gt;
&lt;/RecordSection&gt;

<em>Position record section:</em>
&lt;RecordSection Identifier="Directory_UserRecord_Position" DisplayName_L1="Position Properties" SourceEntityType="Directory_User" ResourceEntityType="Directory_UserRecord" StartProperty="StartDate" EndProperty="EndDate"&gt;    &lt;Property Property="Department" ExtensionKind="None" /&gt;    &lt;Property Property="Location" ExtensionKind="None" /&gt;    &lt;Property Property="JobTitle" ExtensionKind="None" /&gt;&lt;/RecordSection&gt;
</code></pre>
                                            <p>The configuration above binds the position to the contract end date, meaning that a position without an end date will take the end date of the contract.
The properties of the position record section cannot be propagated, meaning if a position does not have a <code>Location</code> it cannot take the <code>Location</code> of the previous or future position.</p>
                                            <p>The following image shows the positions of <code>Mark Barn</code> in a defined timeline.</p>
                                            <p style="text-align: center;">
                                                <img src="../../../../Resources/Images/simple-recordsection-identity.png" alt="simple-recordsection-identity" style="box-shadow: none;width: 803px;height: 413px;" />
                                            </p>
                                            <p>With the given configuration and the identity of <code>Mark Barn</code>, the following contexts are generated:</p>
                                            <p style="text-align: center;">
                                                <img src="../../../../Resources/Images/simple-recordsection-result.png" alt="simple-recordsection-result" style="box-shadow: none;width: 818px;height: 478px;" />
                                            </p>
                                            <p>Each computed context will be used to create a set of dimension-value pairs, thus having 3 sets for the <a href="../evaluate-policy/index.html" target="_parent" title="Evaluate Policy" alt="Evaluate Policy" class="MCXref xref">Evaluate Policy</a> algorithm.</p>
                                            <p>Any rules targeting identities with a <code>fulltime</code><code>Category</code> will be assigned to <code>Mark Barn</code> from <code>Cs</code> to <code>Ce</code>.</p>
                                            <p>Any rules targeting identities working in <code>London</code> will be assigned to <code>Mark Barn</code> from <code>S1</code> to <code>E2</code>.</p>
                                            <p>Any rules targeting all identities will be assigned to <code>Mark Barn</code> from <code>Cs</code> to <code>E2</code> because from <code>E2</code> to <code>Ce</code> there isn't any position. This behavior can be overridden by specifying <code>ExtensionKind="None"</code> on the <code>Directory_UserRecord_Position</code> section.</p>
                                            <h3 id="configuration-of-a-position-extension">Configuration of a position extension</h3>
                                            <h4 id="extension-of-a-property">Extension of a property</h4>
                                            <p>The record sections can help extend some position property value when for some time the identity does not have a position.
For example, let's say that an identity can have multiple positions but they must be in the same <code>Location</code>. So it is safe to configure the record sections to copy the <code>Location</code> from a position if:</p>
                                            <ul>
                                                <li>the identity does not have a position for some time;</li>
                                                <li>for a position, the <code>Location</code> is not defined.</li>
                                            </ul>
                                            <p>Here is the configuration needed to apply this policy.</p><pre class="xml" xml:space="preserve"><code>
<em>Default section:</em>
&lt;RecordSection Identifier="Directory_UserRecord_Default" DisplayName_L1="Contract Properties" SourceEntityType="Directory_User" ResourceEntityType="Directory_UserRecord" StartProperty="ContractStartDate" EndProperty="ContractEndDate"&gt;
&lt;/RecordSection&gt;

<em>Position record section:</em>
&lt;RecordSection Identifier="Directory_UserRecord_Position" DisplayName_L1="Position Properties" SourceEntityType="Directory_User" ResourceEntityType="Directory_UserRecord" StartProperty="StartDate" EndProperty="EndDate"&gt;    &lt;Property Property="Department" ExtensionKind="None" /&gt;
    <b>&lt;Property Property="Location" /&gt;</b>
    &lt;Property Property="JobTitle" ExtensionKind="None" /&gt;&lt;/RecordSection&gt;
</code></pre>
                                            <p>The <code>ExtensionKind="None"</code> was removed for the <code>Location</code> property.</p>
                                            <p>Using the identity of <code>Mark Barn</code> the computed contexts should be as followed:</p>
                                            <p style="text-align: center;">
                                                <img src="../../../../Resources/Images/recordsection-withvaluecopy-result1.png" alt="recordsection-withvaluecopy-result1" style="box-shadow: none;width: 808px;height: 460px;" />
                                            </p>
                                            <p>Any rules targeting identities working in <code>London</code> will be assigned to <code>Mark Barn</code> from <code>Cs</code> to <code>Ce</code>.</p>
                                            <h4 id="extension-of-a-whole-position">Extension of a whole position</h4>
                                            <p>The property value copy can be leveraged to extend a chosen position when for some time the identity does not have one.
See the <a href="#" target="_parent" class="MCXref xref" xrefformat="{para}">
              
              Generate Contexts
              </a> topic for additional information. The following configuration and the identity of <code>Phoebe Buffay</code> will be used to showcase a position extension.
It is done by removing the <code>ExtensionKind="None"</code> of the position properties.</p><pre class="xml" xml:space="preserve"><code>
<em>Default section:</em>
&lt;RecordSection Identifier="Directory_UserRecord_Default" DisplayName_L1="Contract Properties" SourceEntityType="Directory_User" ResourceEntityType="Directory_UserRecord" StartProperty="ContractStartDate" EndProperty="ContractEndDate"&gt;
&lt;/RecordSection&gt;

<em>Position record section:</em>
&lt;RecordSection Identifier="Directory_UserRecord_Position" DisplayName_L1="Position Properties" SourceEntityType="Directory_User" ResourceEntityType="Directory_UserRecord" StartProperty="StartDate" EndProperty="EndDate"&gt;
    <b>&lt;Property Property="Department" /&gt;    &lt;Property Property="Location" /&gt;    &lt;Property Property="JobTitle" /&gt;</b>
&lt;/RecordSection&gt;
</code></pre>
                                            <p style="text-align: center;">
                                                <img src="../../../../Resources/Images/positionextension-identity.png" alt="positionextension-identity" style="box-shadow: none;width: 823px;height: 419px;" />
                                            </p>
                                            <p>Two contexts will be generated.</p>
                                            <p style="text-align: center;">
                                                <img src="../../../../Resources/Images/positionextension-result.png" alt="positionextension-result" style="box-shadow: none;width: 820px;height: 374px;" />
                                            </p>
                                            <p>By default, the previous position is extended when there is a gap.
If there isn't any previous position then the next position will be anticipated.</p>
                                            <p>The choice of the position to extend can be configured by leveraging the <code>SortKeyExpression</code> in the position <a href="../../toolkit/xml-configuration/provisioning/recordsection/index.html" target="_parent" title="RecordSection" alt="RecordSection" class="MCXref xref">
              
              Record Section
              </a>.</p>
                                        </div>
                                    </section>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>