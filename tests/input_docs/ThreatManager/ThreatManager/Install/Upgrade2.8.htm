<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Stealthbits_WebsiteSkin" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|Upgrade" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>Upgrade Threat Manager from 2.6/2.7 To 2.8</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Overview.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>
                                        <script type="text/javascript" src="../../Resources/zzJavaScript/plugins.min.js">
                                        </script>
                                    </p>
                                    <div role="main" id="mc-main-content">
                                        <h1>Upgrade Threat Manager from 2.6/2.7 To 2.8</h1>
                                        <p>Follow the steps to upgrade <span class="mc-variable SD.Product variable">Threat Manager</span> 2.6/2.7 to 2.8 or to apply a hotfix to <span class="mc-variable SD.Product variable">Threat Manager</span>.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 1 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 1 – </b></span></span>Install the new version of PostreSQL.</p>
                                        <p style="text-align: center;">
                                            <img src="../../Resources/Images/ThreatManager/Install/Upgrade/PostgreSQL.jpg" />
                                        </p>
                                        <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span>The migration of PostgreSQL 10 to 14 will require a migration of the<span class="mc-variable SD.Product variable">Threat Manager</span> database. You may proceed through the migration process in the following menu.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 2 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 2 – </b></span></span>Configure the following settings:</p>
                                        <ul>
                                            <li>
                                                <p>Only transfer events associated with a threat – this option provides a migration of the events only associated with threats that have been detected</p>
                                            </li>
                                            <li>
                                                <p>Show Advanced Settings – Advanced settings contains the following parameters:</p>
                                                <ul>
                                                    <li>
                                                        <p>PG Tools Directory – Path to the directory where PostgreSQL binaries are located</p>
                                                        <p style="text-align: center;">
                                                            <img src="../../Resources/Images/ThreatManager/Install/Upgrade/PostgreSQLCompression.jpg" />
                                                        </p>
                                                    </li>
                                                    <li>
                                                        <p>Compression Level – Select the compression level to be applied to the data. It contains the following options:</p>
                                                        <ul>
                                                            <li>
                                                                <p>None – Compression will not be applied to the data</p>
                                                            </li>
                                                            <li>
                                                                <p>Low – Lower level of compression requires more disk space to perform the migration, but takes faster to complete</p>
                                                            </li>
                                                            <li>
                                                                <p>Medium – Medium level of compression balances disk space usage and migration speed</p>
                                                            </li>
                                                            <li>
                                                                <p>High – Higher level of compression reduces the disk space needed for the migration, but it increases the time required for completion</p>
                                                            </li>
                                                        </ul>
                                                        <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span>The compression algorithm option is used on the exported data.  It does not affect either the old or the new database.  </p>
                                                        <p style="text-align: center;">
                                                            <img src="../../Resources/Images/ThreatManager/Install/Upgrade/PostgreSQLThreads.jpg" />
                                                        </p>
                                                    </li>
                                                    <li>
                                                        <p>Number of Threads – Select the number of threads to be applied. Adding more threads can considerably reduce the time to import data to the target server. It contains the following options:</p>
                                                        <ul>
                                                            <li>
                                                                <p>Reliable – One thread</p>
                                                            </li>
                                                            <li>
                                                                <p>Recommended – Number of threads equal to half of the available processor cores</p>
                                                            </li>
                                                            <li>
                                                                <p>Performant – Number of threads equal to the number of processor cores</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <p>Reduce Source Databaze Size – This action will lead to the migration dropping the indexes in the old databases, prior to performing the migration</p>
                                                        <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span>This setting is not recommended as it will leave the old database in a broken state, but the data is preserved. Some users may need this option if they do not have enough free disk space to perform the migration.</p>
                                                        <p>If the migration fails, it can be re-run from the installer.</p>
                                                        <p>This option is also reveals a <b>Delete Source Database</b> checkbox. After exporting the data from the old database, the old database will be deleted.</p>
                                                        <p class="Caution" data-mc-autonum="&lt;span style=&quot;color: #da0000;&quot; class=&quot;mcFormatColor&quot;&gt;&lt;b&gt;CAUTION: &lt;/b&gt;&lt;/span&gt;"><span class="autonumber"><span class="Caution"><span style="color: #da0000;" class="mcFormatColor"><b>CAUTION: </b></span></span></span>The use of <b>Delete Source Database</b> is an extreme option that highly not recommended. It should only be used if you fully understand its purpose and the actions it entails.</p>
                                                        <p>If the migration fails, user will need to manually import the data into the new database from the export file.</p>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 3 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 3 – </b></span></span>Click <b>Validate</b> to proceed. Then, click <b>Next</b> in the bottom right corner.</p>
                                        <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span>The migration of PostgreSQL 10 to 14 may require significant disk space to perform safely. The disk space required for the backup does not need to be on the same disk as the database itself.</p>
                                        <p style="text-align: center;">
                                            <img src="../../Resources/Images/ThreatManager/Install/Upgrade/UpdateNTM.png" />
                                        </p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 4 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 4 – </b></span></span>Install the new version of <span class="mc-variable SD.Product variable">Threat Manager</span>.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 5 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 5 – </b></span></span>Click <b>Test</b> on the <b>Connect to a Threat Manager Database</b> page. The installer should see the existing PostgreSQL database and prompt to migrate.</p>
                                        <p style="text-align: center;">
                                            <img src="../../Resources/Images/ThreatManager/Install/Upgrade/PostgreSQLWarning.png" />
                                        </p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 6 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 6 – </b></span></span>Click <b>OK</b>, click <b>Next</b>, then click <b>Test</b>. You will see the following message. </p>
                                        <p style="text-align: center;">
                                            <img src="../../Resources/Images/ThreatManager/Install/Upgrade/ReadyforMigration.png" />
                                        </p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 7 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 7 – </b></span></span>Click <b>Next</b>.</p>
                                        <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span>Migrating a large database can take about 24 hours or more. During this time <span class="mc-variable SD.Product_Long_Name variable">Netwrix Threat Manager</span> will not work. Installing <span class="mc-variable SD.Product_Long_Name variable">Netwrix Threat Manager</span> 2.8 with a new database, and directing event streams to that server after the installation is complete, will eliminate downtime.</p>
                                        <h2>Clean up Dependencies</h2>
                                        <p>After installation it is necessary to clean up dependencies associated with the previous version of the <span class="mc-variable SD.Product variable">Threat Manager</span>. To do this, uninstall the following dependencies:</p>
                                        <ul>
                                            <li>
                                                <p>PGSQL10</p>
                                            </li>
                                            <li>
                                                <p>Python 3.7 and below</p>
                                            </li>
                                            <li>
                                                <p>.NET Runtime 5</p>
                                            </li>
                                            <li>
                                                <p>ASP.NET Core 5</p>
                                            </li>
                                        </ul>
                                        <p>Complete any post-installation tasks required for your configured environment. See the following topics for additional information:</p>
                                        <ul>
                                            <li>
                                                <p><a href="ActionService.htm" target="_parent" title="Optionally Install the Action Service on Additional Servers" alt="Optionally Install the Action Service on Additional Servers" class="MCXref xref">Optionally Install the Action Service on Additional Servers</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Secure.htm" target="_parent" title="Secure the Threat Manager Console" alt="Secure the Threat Manager Console" class="MCXref xref">Secure the Threat Manager Console</a>
                                                </p>
                                            </li>
                                        </ul>
                                        <p>Clear the cache of the browser that will be used to view the <span class="mc-variable SD.Product variable">Threat Manager</span> Console prior to launching <span class="mc-variable SD.Product variable">Threat Manager</span>.</p>
                                        <h2>Check for Deprecated App Tokens</h2>
                                        <p>If upgrading from a version prior to 2.8, the app tokens may have been deprecated. This can be identified by navigating to the Integrations page in <span class="mc-variable SD.Product variable">Threat Manager</span>. If an app token is deprecated, it is necessary to create a new one for the application to use.</p>
                                        <h3>Identify and Update App Tokens</h3>
                                        <p>Follow the steps to identify and create new app tokens.</p>
                                        <p class="Step-Reset" data-mc-autonum="&lt;b&gt;Step 1 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 1 – </b></span></span>In the <span class="mc-variable SD.Product variable">Threat Manager</span> Console, navigate to the Integrations page.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 2 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 2 – </b></span></span>Expand the App Tokens section of the Integrations box and identify any of the app tokens that have been deprecated during the upgrade. A deprecated app token can be identified by the presence of a red warning triangle.</p>
                                        <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span>Non-local action services will need their app tokens updated. Local action services will be automatically updated.</p>
                                        <p style="text-align: center;">
                                            <img src="../../Resources/Images/ThreatManager/Install/Upgrade/AppTokensDep.png" />
                                        </p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 3 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 3 – </b></span></span>Take note of the app token name and description and create a new one to be used with the application. See the <a href="../Administration/Configuration/Integrations/AppToken.htm" target="_parent" title="App Tokens" alt="App Tokens" class="MCXref xref">App Tokens Page</a>&#160;topic for additional information.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 4 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 4 – </b></span></span>Update the application to use the new app token. See the <a href="Integration/Overview.htm" target="_parent" alt="Integration with Other Netwrix Products" title="Integration with Other Netwrix Products" class="MCXref xref">Integration with Other Netwrix Products</a> topic for additional information.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 5 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 5 – </b></span></span>Delete the old, deprecated app token.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>