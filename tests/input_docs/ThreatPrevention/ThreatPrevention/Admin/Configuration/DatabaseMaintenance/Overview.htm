<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Stealthbits_WebsiteSkin" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|Configuration" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" /><title>Database Maintenance Window</title>
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="complementary" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="Main navigation and search" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../Overview.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>
                                        <script type="text/javascript" src="../../../../Resources/zzJavaScript/plugins.min.js">
                                        </script>
                                    </p>
                                    <div role="main" id="mc-main-content">
                                        <h1>Database Maintenance Window</h1>
                                        <p>The database maintenance function grooms the NVMonitorData database to optimize performance. It automatically deletes or archives data aged beyond a specified threshold. The threshold can be set per Event Type, per Analytics, and/or per Policy. While all three options can be enabled with different retention periods, the Event Type maintenance settings take precedence over Policy maintenance settings where the selected policy employs that event type.</p>
                                        <p>If you choose to archive data instead of deleting it, then you have to specify a database for data archiving. For this database, you can also define settings to delete data aged beyond a specified threshold.</p>
                                        <p class="Remember" data-mc-autonum="&lt;span style=&quot;color: #fb8000;&quot; class=&quot;mcFormatColor&quot;&gt;&lt;i&gt;Remember, &lt;/i&gt;&lt;/span&gt;"><span class="autonumber"><span class="Remember"><span style="color: #fb8000;" class="mcFormatColor"><i>Remember, </i></span></span></span>See the Database Maintenance Permission details in the <a href="../../../Requirements/DBMaintenance.htm" title="Database Maintenance Feature Requirements" alt="Database Maintenance Feature Requirements" target="_parent" class="MCXref xref">Database Maintenance Feature Requirements</a> topic. </p>
                                        <p>See the <a href="StoredProcedures.htm" title="Stored Procedures" alt="Stored Procedures" target="_parent" class="MCXref xref">Stored Procedures</a> topic for additional information on stored procedures <span class="mc-variable SI.Product variable">Threat Prevention</span> uses on its SQL Server databases. </p>
                                        <p>Follow the steps to configure database maintenance.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 1 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 1 – </b></span></span>Click  <b>Configuration</b> &gt; <b>Database</b> &gt; <b>Maintenance</b> on the menu. The Database Maintenance window is displayed.</p>
                                        <p>This window is only available to <span class="mc-variable SI.Product variable">Threat Prevention</span> administrators.</p>
                                        <p style="text-align: center;">
                                            <img src="../../../../Resources/Images/ThreatPrevention/DBMaintenance/Warning.png" title="Threat Prevention WinConsole Warning window" alt="Threat Prevention WinConsole Warning window" />
                                        </p>
                                        <p>The database maintenance feature is only available if the SQL Server Agent service is running on the SQL Server host. A warning message displays instead of the Database Maintenance window if this service is not running.</p>
                                        <p>To enable the service, go to <b>Start</b> &gt; <b>Administrative Tools</b> &gt; <b>Services</b> interface and start the SQL Server Agent (MSSQLSERVER). </p>
                                        <p>When the SQL Server Agent service is running, the Database Maintenance window opens. </p>
                                        <p style="text-align: center;">
                                            <img src="../../../../Resources/Images/ThreatPrevention/DBMaintenance/DatabaseMaintenance.png" style="width: 802px;height: 703px;" title="Database Maintenance window" alt="Database Maintenance window" />
                                        </p>
                                        <p>The following information is displayed at the top of the window: </p>
                                        <ul>
                                            <li>
                                                <p>Database Information: &#160;</p>
                                            </li>
                                        </ul>
                                        <blockquote>
                                            <ul>
                                                <li>Server  – SQL Server where database maintenance is performed </li>
                                                <li>Database – Name of the database </li>
                                                <li>Database Size – Current size of the database</li>
                                                <li>Oldest Data – Date of the oldest data in the database</li>
                                            </ul>
                                        </blockquote>
                                        <ul>
                                            <ul>
                                                <li>Job Information: <ul><li>Last run – Date timestamp when the last database maintenance job was executed</li><li>Status – Status of the job. Different statuses are:<ul><li><p>Idle – Indicates that no database maintenance task is running</p></li><li>Succeeded – Indicates that the most recent job finished without error</li><li>Running – Indicates that a job is running</li><li><p> Error – Indicates that the job started but terminated on an error</p></li></ul></li><li>Running Step – During job execution, this field populates with the step being executed</li><li>Elapsed Time – Overall elapsed time of job execution </li></ul></li>
                                            </ul>
                                            <p>The Refresh button in the upper-right corner refreshes this database and job information.</p>
                                        </ul>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 2 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 2 – </b></span></span> On the Event Type, Analytics, and/or Policy tabs, enable maintenance for all or some of the options. See the <a href="Enable.htm" title="Enable Database Maintenance" alt="Enable Database Maintenance" target="_parent" class="MCXref xref">Enable Database Maintenance</a> topic for additional information. </p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 3 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 3 – </b></span></span>On the Schedule tab, set the frequency and time when the database maintenance job runs. See the <a href="Schedule.htm" title="Schedule Database Maintenance" alt="Schedule Database Maintenance" target="_parent" class="MCXref xref">Schedule Database Maintenance</a> topic for additional information. </p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 4 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 4 – </b></span></span>To use the Move operation, you must specify a database on the Archive DB tab. You can also define settings to delete data aged beyond a specified threshold from the archive database. See the <a href="Archive.htm" title="Archive Data" alt="Archive Data" target="_parent" class="MCXref xref">Archive Data</a> topic for additional information. </p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 5 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 5 – </b></span></span>Click <b>Save</b> to save the changes.</p>
                                        <p class="Recommended-1" data-mc-autonum="&lt;span style=&quot;color: #fb8000;&quot; class=&quot;mcFormatColor&quot;&gt;&lt;b&gt;&lt;i&gt;RECOMMENDED: &lt;/i&gt;&lt;/b&gt;&lt;/span&gt;"><span class="autonumber"><span class="Recommended"><span style="color: #fb8000;" class="mcFormatColor"><b><i>RECOMMENDED: </i></b></span></span></span>The SQL Server databases should be configured to use 'Simple Recovery Mode' in the <a href="../../../Requirements/SQLServer.htm" target="_parent" title="SQL Server Requirements" alt="SQL Server Requirements" class="MCXref xref">SQL Server Requirements</a>. This configuration has a direct impact on the size of the transaction log during database maintenance delete tasks. If Simple Recovery Mode is not configured on the databases, the transaction log may get quite large during delete tasks. </p>
                                        <h2><a name="Event"></a>Event Type Tab</h2>
                                        <p>The Event Type tab is displayed by default when the Database Maintenance window  opens.</p>
                                        <p class="p_5" style="text-align: center;">
                                            <img src="../../../../Resources/Images/ThreatPrevention/DBMaintenance/EventType.png" title="Database Maintenance window - Event Type tab" alt="Database Maintenance window - Event Type tab" style="width: 772px;height: 449px;" />
                                        </p>
                                        <p>Check the <b>Enabled</b> box at the top to set database maintenance by event type. The table contains the following information:</p>
                                        <ul>
                                            <li>Enable – Checked box indicates database maintenance is enabled for the event type</li>
                                            <li>Event Type – Data is grouped by the following event types:<ul><li>Active Directory – Configure maintenance for all event data collected by the Active Directory Changes, Active Directory Lockdown,  Active Directory Read Monitoring, AD Replication Monitoring, AD Replication Lockdown, Effective Group Membership, FSMO Role Monitoring, GPO Setting Lockdown, GPO Setting Changes, LSASS Guardian – Monitor, LSASS Guardian – Protect, and Password Enforcement Event Types</li><li>Authentications – Configure maintenance for all event data collected by the Authentication Monitoring and Authentication Lockdown Event Types. This does not apply to Analytics policy data</li><li>Exchange – Configure maintenance for all event data collected by the Exchange Changes and Exchange Lockdown Event Types</li><li>File System – Configure maintenance for all event data collected by the File System Changes, File System Lockdown, and File System Enterprise Auditor Event Types</li><li>LDAP – Configure maintenance for all event data collected by the LDAP Monitoring, LDAP Lockdown, and LDAP Bind Monitoring Event Types</li></ul></li>
                                            <li>Operation – The operation set for the event type: Move (for archiving) or Delete</li>
                                            <li>Retention Period – The age of data to be retained when the database maintenance job is executed for the event type</li>
                                        </ul>
                                        <h2><a name="Analytic"></a>Analytics Tab</h2>
                                        <p>Click the <b>Analytics</b> tab on the Database Maintenance window.</p>
                                        <p style="text-align: center;">
                                            <img src="../../../../Resources/Images/ThreatPrevention/DBMaintenance/Analytics.png" style="width: 773px;height: 447px;" title="Database Maintenance window - Analytics tab" alt="Database Maintenance window - Analytics tab" />
                                        </p>
                                        <p>Check the <b>Enabled</b> box at the top to set database maintenance by analytic. The table contains the following information:</p>
                                        <ul>
                                            <li>Enable – Checked box indicates database maintenance is enabled for the analytic</li>
                                            <li>Analytic Name – Name of each analytic</li>
                                            <li>Operation – The operation set for the analytic: Move (for archiving) or Delete</li>
                                            <li>Retention Period – The age of data to be retained when the database maintenance job is executed for the analytic</li>
                                            <li>Incident Count – The number of incidents recorded in the database for each analytic</li>
                                            <li>Event Count – The number of events for the recorded incidents in the database for each analytic</li>
                                        </ul>
                                        <p>The rows in the table can be sorted alphanumerically by the Analytic Name, Incident Count, or Event Count column.</p>
                                        <p>Above the table is a cumulative count of:</p>
                                        <ul>
                                            <li>Total Incidents – The number of incidents recorded in the database for all analytics</li>
                                            <li>Total Events – The number of events for the recorded incidents in the database for all analytics</li>
                                        </ul>
                                        <h2><a name="Policy"></a>Policy Tab</h2>
                                        <p>Click the <b>Policy</b> tab on the Database Maintenance window.</p>
                                        <p style="text-align: center;">
                                            <img src="../../../../Resources/Images/ThreatPrevention/DBMaintenance/Policy.png" style="width: 767px;height: 448px;" title="Database Maintenance window - Policy tab" alt="Database Maintenance window - Policy tab" />
                                        </p>
                                        <p>Check the <b>Enabled</b> box at the top to set database maintenance by policy. The table contains the following information:</p>
                                        <ul>
                                            <li>Enable – Checked box indicates database maintenance is enabled for the policy</li>
                                            <li>Policy – Name of each policy you have created. Policies are listed in alphanumeric order, first live policies (whether or not they are enabled) and then the deleted policies are listed</li>
                                            <li>Operation – The operation set for the policy: Move (for archiving) or Delete</li>
                                            <li>Retention Period – The age of data to be retained when the database maintenance job is executed for the policy</li>
                                            <li>Event Count – The number of events for the recorded incidents in the database for each policy</li>
                                        </ul>
                                        <p>Above the table is a cumulative count of:</p>
                                        <ul>
                                            <li>Total Events – The number of events for the recorded incidents in the database for all policies</li>
                                        </ul>
                                        <p>The rows in the table can be sorted alphanumerically by the <span class="span_3">Policy</span> or <span class="span_3">Event Count</span> column. Deleted policies are always listed after all other policies.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>