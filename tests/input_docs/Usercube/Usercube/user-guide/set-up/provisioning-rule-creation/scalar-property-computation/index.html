<!DOCTYPE html>
<html lang="en-us" class="js csstransforms3d _Skins_HTML5___Side_Navigation" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Home Page|User Guide|Set Up|Create a Provisioning Rule">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Resources/TableStyles/Sb Table 1.css" rel="stylesheet" data-mc-stylesheet-type="table" /><title>Compute a Scalar Property</title>
        <link href="../../../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body class="" data-url="../../../../user-guide/set-up/provisioning-rule-creation/scalar-property-computation/">
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../../index.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <h1>Compute a Scalar Property</h1>
                                    <p>How to define scalar rules to compute and provision the values of scalar properties for target resources based on source resources. See the <a href="../../../../integration-guide/toolkit/xml-configuration/provisioning/resourcetype/index.html" target="_parent" title="Resource Type" alt="Resource Type" class="MCXref xref">Resource Type</a>&#160;topic for additional information.</p>
                                    <h2 id="overview">Overview</h2>
                                    <p>Sources are usually identities, and targets are usually accounts from the managed systems.</p>
                                    <p>Here, we are going to compute the values of scalar properties for the target resources used in entitlement management, based on source resources. See the <a href="../../connect-system/entity-type-creation/index.html" target="_parent" title="Create an Entity Type" alt="Create an Entity Type" class="MCXref xref">Create an Entity Type</a> topic for additional information. We are going to provision these properties, i.e. write them to the managed system. See the <a href="../../../administrate/provisioning/index.html" target="_parent" title="Provision" alt="Provision" class="MCXref xref">Provision</a>topic for additional information.</p>
                                    <p>The right tools for the job are scalar rules.</p>
                                    <p>A scalar property's value can be computed by a scalar rule, based on at least one scalar property from the source entity type, possibly writing a C# expression.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../../../Resources/Images/ProvRules_schemaScalar.png" alt="Schema - Scalar Rule" style="box-shadow: none;" />
                                    </p>
                                    <p><a name="ex-scalar"></a>A scalar rule could define the scalar property displayName of nominative AD accounts based on its owner's name with the expression:
<br />return person.LastName + " " + person.FirstName;</p>
                                    <p>The application of a scalar rule can depend on the assignment of a single role. See the <a href="../../single-roles-catalog-creation/index.html" target="_parent" title="Create Roles in the Role Catalog" alt="Create Roles in the Role Catalog" class="MCXref xref">
              
              Create Roles in the Role Catalog
              </a> topic for additional information.</p>
                                    <p>Sometimes we create in <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;properties which are not directly linked to any real property in the managed system. A scalar rule on this kind of property will not find a property to provision in the managed system, and thus will not produce any result.
<br /><br />For example, we may need to create in the AD the property isUnused (to spot unused accounts) with a C# expression based on other properties from the same entity type. These properties, such as accountExpires and lastLogonTimestamp, are each linked to a property from the AD, while isUnused is for <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>'s use only. This scalar property isUnused does not exist in the AD, thus will never be provisioned to the AD, and thus will not be computed by a scalar rule.
<br /><br />Also some properties, like lastLogonTimestamp in the AD or identifiers from ServiceNow, must be changed only by their application. <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> can/must not change these properties, thus no provisioning rule is appropriate for them.</p>
                                    <div class="notices info">
                                        <p>A scalar rule using a single role as criterion will trigger the creation of a target resource for all impacted source resources (so all users), which are not yet correlated with a resource of this resource type.
<br /><br />Without a criterion, a scalar rule does not create resources, and only computes the scalar properties of existing resources.</p>
                                    </div>
                                    <h2 id="guidelines">Guidelines</h2>
                                    <p class="Bold_Subheading">Expression code must not contain too much data</p>
                                    <p>Once configured, a rule is a complicated object to modify. Therefore, you must keep business data in the resource and out of the expression. It is easier to change data than to change a rule.</p>
                                    <p>For example, consider an organization that manages email addresses according to the site with .fr for France and .be for Belgium.</p>
                                    <p>A working option could be to write an expression with a condition if on the site to assign the domain name. However, if the organization expands and needs to consider an additional country, then the rule requires change in the expression code.</p>
                                    <p>A better solution is to change the identity data model by adding a field Domain Name to describe the object Site, and to be used in the rule expression. In this case, if there is an additional country, then a new field is added in the data model for Site and Domain Name. Thus, the rule expression remains simple by using the new objects, for example <code>Email = FirstName + "." + LastName + "@" + Company + "." + DomainName</code>.</p>
                                    <p class="Bold_Subheading">Priority between scalar rules</p>
                                    <p>A scalar rule with a role as a criterion has a higher priority than a rule without a role criterion.</p>
                                    <p>For example, consider the situation where we want the login &lt;A&gt; for users with the single role &lt;RA&gt;, and the login &lt;B&gt; for the others. In this case, we can write two distinct scalar rules where the first one has the role &lt;RA&gt; as a criterion. This rule will be applied before the other.</p>
                                    <p>Other than that, there should not be more than one rule meant to provision a given property on a given time period.</p>
                                    <p>It means that:</p>
                                    <ul>
                                        <li>Several rules computing the same property with different criteria should not coexist;</li>
                                        <li>The only reason to have several rules to compute a single property is when changing the property value over time, via time offsets.</li>
                                    </ul>
                                    <h2 id="participants-and-artifacts">Participants and Artifacts</h2>
                                    <p>For a given managed system, integrators may need the help of the application owner who knows the application users, entitlements and data model.</p>
                                    <table style="mc-table-style: url('../../../../../Resources/TableStyles/Sb Table 1.css');margin-left: auto;margin-right: auto;" class="TableStyle-Sb_Table_1" cellspacing="21">
                                        <col class="TableStyle-Sb_Table_1-Column-Column1" />
                                        <col class="TableStyle-Sb_Table_1-Column-Column1" />
                                        <thead>
                                            <tr class="TableStyle-Sb_Table_1-Head-Header1">
                                                <th class="TableStyle-Sb_Table_1-HeadE-Column1-Header1">
                                                    <p>Input</p>
                                                </th>
                                                <th class="TableStyle-Sb_Table_1-HeadD-Column1-Header1">
                                                    <p>Output</p>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="TableStyle-Sb_Table_1-Body-Body1">
                                                <td class="TableStyle-Sb_Table_1-BodyB-Column1-Body1">
                                                    <p>Categorization (required)<br /></p>
                                                </td>
                                                <td class="TableStyle-Sb_Table_1-BodyA-Column1-Body1">
                                                    <p>Scalar rules</p>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <p>See the <a href="../../categorization/index.html" target="_parent" title="Categorize Resources" alt="Categorize Resources" class="MCXref xref">
              
              Categorize Resources
              </a> topic for additional information.</p>
                                    <h2 id="create-a-scalar-rule">Create a Scalar Rule</h2>
                                    <p>Fill an entity type with a scalar rule by proceeding as follows:</p>
                                    <p style="text-align: center;">
                                        <img src="../../../../../Resources/Images/Home_rules_V602.png" alt="Home - Access Rules" />
                                    </p>
                                    <p class="Step-Reset" data-mc-autonum="&lt;b&gt;Step 1 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 1 – </b></span></span>Click on <b>Access Rules</b> on the home page in the <b>Configuration</b> section.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../../../Resources/Images/ProvRules_entityType_V602.png" alt="Entity Type Choice" />
                                    </p>
                                    <p class="Step" data-mc-autonum="&lt;b&gt;Step 2 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 2 – </b></span></span>In the dropdown menu at the top left, choose the source entity type for the future scalar rule.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../../../Resources/Images/iconAdd_V602.png" />
                                    </p>
                                    <p class="Step" data-mc-autonum="&lt;b&gt;Step 3 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 3 – </b></span></span>Click on the <strong>Scalars</strong> tab and on the addition button at the top right corner.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../../../Resources/Images/ProvRules_scalarRule_V522.png" alt="Create Scalar Rule" />
                                    </p>
                                    <p class="Step" data-mc-autonum="&lt;b&gt;Step 4 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 4 – </b></span></span>Fill in the fields.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../../../Resources/Images/ProvRules_scalarRuleFields_V602.png" alt="Scalar Rule Fields" />
                                    </p>
                                    <p>Once the Resource Type is provided, more fields appear.</p>
                                    <ul>
                                        <li>
                                            <p>Source Object: Scalar property (or expression of scalar properties) from the source entity type, which constitutes the input for the computation of the target object. Can be defined by a property path and/or an expression.</p>
                                        </li>
                                        <li>
                                            <p>Target Object: Scalar property from the target entity type, whose value is to be impacted.</p>
                                        </li>
                                        <li>
                                            <p>Offset of effective date: Time period that defines the actual effective date for property computation according to the value's start and/or end date.</p>
                                            <p>For example, account activation and deactivation can be managed according to the start and/or end dates.</p>
                                        </li>
                                        <li>
                                            <p>Applicable: Create &amp; Update to use this computation to both provision the managed system and synchronize the property back to <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>; <b>Create Only</b> to use this computation to only provision the managed system and ignore this property during synchronization, this way the property can never be displayed as non-conforming.</p>
                                            <p><b>Create Only</b> is usually set to adapt the configuration to the constraints of the managed system, when <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> does not retrieve and/or update the property value.</p>
                                            <p>For example, consider a system, that we want to connect to <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> (let's call it SYST) using a title property. Consider also that SYST needs to be provisioned with the value of title, but does not allow any other system to retrieve said value.</p>
                                            <p>In this case, we use <b>Create Only</b> so that <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> sends the adequate provisioning order upon creation, and then is able to change the provisioning state to <b>Executed</b> without synchronization. If any changes impact that <b>Scalar Property</b> value the workflow state will be modified to <b>PolicyApprovedWithChanges</b> meaning that the policy value is not equal to the external system's value and that will not be provisioned.</p>
                                        </li>
                                        <li>
                                            <p>Comparison type: Comparison type between the value of the target object computed by the rule and its value from the managed system. Non-conforming values are displayed on the <strong>Provisioning Review</strong> screen.</p>
                                        </li>
                                        <li>
                                            <p>Criteria: Conditions that, if met, trigger the rule application.</p>
                                        </li>
                                    </ul>
                                    <p>
                                        <!-- TODO:More details about the offset of effective date. -->
                                    </p>
                                    <p>Our example would look like:

</p>
                                    <p style="text-align: center;">
                                        <img src="../../../../../Resources/Images/ProvRules_exampleScalar_V522.png" alt="Scalar Rule Example" />
                                    </p>
                                    <p class="Step" data-mc-autonum="&lt;b&gt;Step 5 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 5 – </b></span></span>Click on <strong>Create</strong> and see a line added on the rules page.</p>
                                    <h2 id="impact-of-modifications">Impact of Modifications</h2>
                                    <p>Any modification in a scalar rule is taken into account when launching the role model computation task, in the <strong>Resource Types</strong> frame of the corresponding connector's overview page, via <strong>Jobs</strong> &gt; <strong>Compute Role Model</strong>.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../../../Resources/Images/Synchro_resourceType_V602.png" alt="Resource Type Jobs" />
                                    </p>
                                    <p>This task applies the rules and computes new properties. Therefore, if a given rule's criterion is modified, then all corresponding assignments are computed again. If a resource was created automatically for an identity through a scalar rule (and its single role criterion), and if the user's criteria do not comply with the new version of the rule, then the corresponding resource is automatically deleted.</p>
                                    <div class="notices note">
                                        <p>A modification in a provisioning rule can trigger the removal of a resource only on the <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> side. There are several barriers to cross before said resource is removed from the managed system.</p>
                                    </div>
                                    <p>Simulations are available in order to anticipate the changes induced by a creation/modification/deletion in scalar rules. See the <a href="../../../optimize/simulation/index.html" target="_parent" title="Perform a Simulation" alt="Perform a Simulation" class="MCXref xref">
              
              Perform a Simulation
              </a> topic for additional information.</p>
                                    <h2 id="verify-rule-creation">Verify Rule Creation</h2>
                                    <p>In order to verify the process:</p>
                                    <p style="text-align: center;">
                                        <img src="../../../../../Resources/Images/Synchro_resourceType_V602.png" alt="Resource Type Jobs" />
                                    </p>
                                    <p class="Step-Reset" data-mc-autonum="&lt;b&gt;Step 1 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 1 – </b></span></span>On the corresponding connector's overview page, in the <strong>Resource Types</strong> frame click on <strong>Jobs</strong> &gt; <strong>Compute Role Model</strong> to apply all rules.</p>
                                    <p class="Step" data-mc-autonum="&lt;b&gt;Step 2 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 2 – </b></span></span>Review unreconciled properties on the <strong>Resource Reconciliation</strong> screen to help check scalar rules: if there are numerous properties to be reconciled following the same pattern, then there may be a rule that needs to be changed. See the <a href="../../../administrate/non-conforming-assignment-review/property-reconciliation/index.html" class="MCXref xref">
              
              Reconcile a Property
              </a> topic for additional information.</p>
                                    <p>Once the steps completed the process is verified.</p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>