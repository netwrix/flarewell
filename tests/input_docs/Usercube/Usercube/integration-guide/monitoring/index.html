<!DOCTYPE html>
<html lang="en-us" class="js csstransforms3d _Skins_HTML5___Side_Navigation" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Home Page|Integration Guide">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Resources/TableStyles/Sb Table 1.css" rel="stylesheet" data-mc-stylesheet-type="table" /><title>
              
              Monitoring
              </title>
        <link href="../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body class="" data-url="../../integration-guide/monitoring/">
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../index.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <section id="body">
                                        <div id="body-inner">
                                            <h1>
                                                <div>
              
              Monitoring
              </div>
                                            </h1>
                                            <p><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;uses <a href="https://github.com/serilog/">Serilog</a>, a highly customizable logging tool, to provide monitoring capabilities.</p>
                                            <p>See the <a href="references/index.html" target="_parent" title="References: Logs" alt="References: Logs" class="MCXref xref">
              
              References: Logs
              </a> topic for additional information on the list of existing logs.</p>
                                            <h2 id="introduction">Introduction</h2>
                                            <p>Serilog configuration is written to both <em>Agent</em>'s and <em>Server</em>'s <code>appsettings</code> sets. The relevant top-level section is <code>Serilog</code>.</p>
                                            <p>A full description of Serilog's configuration capabilities is available in <a href="https://github.com/serilog/serilog-settings-configuration#serilogsettingsconfiguration--">Serilog's official documentation</a>.</p>
                                            <p><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>-specific configuration is detailed here.</p>
                                            <h2 id="log-level-and-namespaces">Log Level and Namespaces</h2>
                                            <h3 id="priority">Priority</h3>
                                            <p>Logs can be filtered according to a <em>log level</em>.</p>
                                            <p>A priority order between the log levels is established.</p>
                                            <p>From low priority to high priority, available log levels are:</p>
                                            <ul>
                                                <li>
                                                    <p><code>Verbose</code>
                                                    </p>
                                                </li>
                                                <li>
                                                    <p><code>Debug</code>
                                                    </p>
                                                </li>
                                                <li>
                                                    <p><code>Information</code>
                                                    </p>
                                                </li>
                                                <li>
                                                    <p><code>Warning</code>
                                                    </p>
                                                </li>
                                                <li>
                                                    <p><code>Error</code>
                                                    </p>
                                                </li>
                                                <li>
                                                    <p><code>Fatal</code>
                                                    </p>
                                                </li>
                                            </ul>
                                            <p>Every log message is associated with a log level and a user-defined <em>namespace</em>. <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> provides the <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> namespace, associated with logs relevant to the user.</p>
                                            <h3 id="minimumlevel">MinimumLevel</h3>
                                            <p>The <code>MinimumLevel</code> section sets the lowest priority log level that will be displayed. Every log message associated with a log level of priority strictly lower than the minimum level is ignored.</p>
                                            <p><code>MinimumLevel</code> value can either be a log level or an object with the following attributes and subsections:</p>
                                            <ul>
                                                <li>
                                                    <p><strong>Default</strong> sets the minimum log level.</p>
                                                </li>
                                                <li>
                                                    <p><code>Override</code> allows the user to set a different minimum log level for logs from a specific namespace (See the <a href="#" target="_parent" title="Monitoring" alt="Monitoring" class="MCXref xref selected">
              
              Monitoring
              </a> topic for additional information.)</p>
                                                    <p>Within <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>, the following example is a good practice: default logs with a priority lower than <code>Error</code> are filtered out, except for log messages from the <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> namespace.</p>
                                                </li>
                                            </ul><pre class="json" xml:space="preserve"><code><em>appsettings.json</em>
{
  ...
  "Serilog": {
    ...
    "MinimumLevel": {
      "Default": "Error",
      "Override": {
        "Usercube": "Information"
      }
    }
  }
}</code></pre>
                                            <h3 id="custom-namespaces">Custom namespaces</h3>
                                            <p>Here is a table giving some namespace that you could add in the <code>Override</code> section, in order to monitor the associated module.</p>
                                            <table style="mc-table-style: url('../../../Resources/TableStyles/Sb Table 1.css');margin-left: auto;margin-right: auto;" class="TableStyle-Sb_Table_1" cellspacing="21">
                                                <col class="TableStyle-Sb_Table_1-Column-Column1" />
                                                <col class="TableStyle-Sb_Table_1-Column-Column1" />
                                                <thead>
                                                    <tr class="TableStyle-Sb_Table_1-Head-Header1">
                                                        <th style="font-size: 11pt;" class="TableStyle-Sb_Table_1-HeadE-Column1-Header1">
                                                            <p>Module</p>
                                                        </th>
                                                        <th style="font-size: 11pt;" class="TableStyle-Sb_Table_1-HeadD-Column1-Header1">
                                                            <p>Namespace</p>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body1">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyE-Column1-Body1">
                                                            <p><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>
                                                            </p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyD-Column1-Body1">
                                                            <p><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>
                                                            </p>
                                                        </td>
                                                    </tr>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body2">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyE-Column1-Body2">
                                                            <p>Scheduler (server side)</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyD-Column1-Body2">
                                                            <p>Usercube.Jobs.Scheduler.Server</p>
                                                        </td>
                                                    </tr>
                                                    <tr class="TableStyle-Sb_Table_1-Body-Body1">
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyB-Column1-Body1">
                                                            <p>Scheduler (agent side)</p>
                                                        </td>
                                                        <td style="font-size: 11pt;" class="TableStyle-Sb_Table_1-BodyA-Column1-Body1">
                                                            <p>Usercube.Jobs.Scheduler</p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <h2 id="log-properties">Log Properties</h2>
                                            <p>Each log has a specific set of log properties, defined using the context of the server when generating the log (see <a href="https://github.com/serilog/serilog/wiki/Formatting-Output#formatting-plain-text">Formatting</a>).</p>
                                            <p>It is possible to modify the format message of the log displayed by overriding the <code>outputTemplate</code> of the logs:</p><pre class="json" xml:space="preserve"><code>appsettings.json
{
  ...
  "Serilog": {
    "MinimumLevel": {
      "Default": "Verbose",
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] ClientId:{ClientId} {Message:lj}{NewLine}{Exception}"
        }
      }
    ]
  }
}</code></pre>
                                            <p>Among all default properties, <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;adds the ClientId log property which can be displayed when using the previous <code>outputTemplate</code> format.</p>
                                            <h2 id="filters">Filters</h2>
                                            <p>In addition to the Microsoft log levels, Serilog provides a <a href="https://github.com/serilog/serilog-filters-expressions">Filters</a> feature to build more advanced filter queries on log messages.</p>
                                            <h2 id="sinks">Sinks</h2>
                                            <p>Serilog allows the user to route log messages to a variety of logging destinations. Every destination is referred to as a sink. <a href="https://github.com/serilog/serilog/wiki/Provided-Sinks">Sinks</a> allows logs to be routed to destination such as standard consoles, files and logging services. See the <a href="#" target="_parent" title="Monitoring" alt="Monitoring" class="MCXref xref selected">
              
              Monitoring
              </a> topic for additional information.</p>
                                            <p><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>'s supported sinks are:</p>
                                            <ul>
                                                <li>
                                                    <p><code>Serilog.Sinks.ApplicationInsights</code>;</p>
                                                </li>
                                                <li>
                                                    <p><code>Serilog.Sinks.Async</code>;</p>
                                                </li>
                                                <li>
                                                    <p><code>Serilog.Sinks.Console</code> to write to the console;</p>
                                                </li>
                                                <li>
                                                    <p><code>Serilog.Sinks.Datadog.Logs</code>;</p>
                                                </li>
                                                <li>
                                                    <p><code>Serilog.Sinks.File</code> to write to a file;</p>
                                                </li>
                                                <li>
                                                    <p><code>Serilog.Sinks.Map</code>;</p>
                                                </li>
                                                <li>
                                                    <p><code>Serilog.Sinks.Network</code> to write to another network;</p>
                                                    <blockquote>
                                                        <p>For example, this sink can be used when producing a JSON output for QRadar.</p>
                                                    </blockquote>
                                                </li>
                                                <li>
                                                    <p><code>Serilog.Sinks.PeriodicBatching</code>;</p>
                                                </li>
                                                <li>
                                                    <p><code>Serilog.Sinks.Splunk.Durable</code> to send logs to Splunk;</p>
                                                </li>
                                                <li>
                                                    <p><code>Serilog.Sinks.Syslog</code>.</p>
                                                    <blockquote>
                                                        <p>For example, this sink can be used when producing an <a href="https://tools.ietf.org/html/rfc3164">RFC3164</a> or <a href="https://tools.ietf.org/html/rfc5424">RFC5424</a> output for QRadar.</p>
                                                    </blockquote>
                                                </li>
                                            </ul>
                                            <p>The log messages can be routed to several logging destinations simultaneously. These destinations are described in the <strong>WriteTo</strong> attribute.</p><pre class="json" xml:space="preserve"><code><em>appsettings.json</em>
{
  ...
"Serilog": {
    "Using": [
      "Serilog.Sinks.Network"
    ],
    "MinimumLevel": {
      "Default": "Error",
      "Override": {
          "Usercube": "Information"
      }
    },
    "WriteTo": [
      {
        "Name": "Destination1",
        "Args": {
          "uri": "192.168.13.110",
          "port": "514",
          "textFormatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
        }
      },
      {
        "Name": "Destination2",
        "Args": {
          "uri": "192.168.13.227",
          "port": "514",
          "textFormatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
        }
      }
    ],
    "Filter": [
      {
        "Name": "ByIncludingOnly",
        "Args": { "expression": "StartsWith(SourceContext, 'Usercube') and EventId.Id &gt;= 500" }
      }
    ]
  }
}</code></pre>
                                            <p>There can only be one <strong>Filter</strong> attribute associated with a <strong>WriteTo</strong> attribute. Therefore, the filter defined in the <strong>Filter</strong> attribute is applied to all the destinations contained in the <strong>WriteTo</strong> attribute.
To filter only one destination at a time, sub-loggers can be used.</p><pre class="json" xml:space="preserve"><code><em>appsettings.json</em>
{
  ...
"Serilog": {
    "Using": [
      "Serilog.Sinks.Network"
    ],
    "MinimumLevel": {
      "Default": "Error",
      "Override": {
          "Usercube": "Information"
      }
    },
    "WriteTo": [
      {
        "Name": "Logger1",
        "Args": {
          "configureLogger": {
            "MinimumLevel": {
                "Default": "Information"
            },
            "WriteTo": [
              {
                "Name": "Destination1",
                "Args": {
                  "uri": "192.168.13.127",
                  "port": "514",
                  "textFormatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
                }
              }
            ],
            "Filter": [
              {
                "Name": "ByIncludingOnly",
                "Args": { "expression": "StartsWith(SourceContext, 'Usercube') and EventId.Id &gt;= 500" }
              }
            ]
          }
        }
      },
      {
        "Name": "Logger2",
        "Args": {
          "configureLogger": {
            "MinimumLevel": {
                "Default": "Information"
            },
            "WriteTo": [
              {
                "Name": "Destination2",
                "Args": {
                  "uri": "192.168.13.100",
                  "port": "514",
                  "textFormatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
                }
              },
              {
                "Name": "Destination3",
                "Args": {
                  "uri": "192.168.13.408",
                  "port": "514",
                  "textFormatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
                }
              }
            ],
            "Filter": [
              {
                "Name": "ByIncludingOnly",
                "Args": { "expression": "StartsWith(SourceContext, 'Test') and EventId.Id &gt;= 800" }
              }
            ]
          }
        }
      }
    ]
  }
}</code></pre>
                                            <p>In the example above, the filter defined in <strong>Logger1</strong> will only apply to <strong>Destination1</strong>, and the filter defined in <strong>Logger2</strong> will only apply to <strong>Destination2</strong> and <strong>Destination3</strong>.</p>
                                            <div class="notices warning">
                                                <p>When using <code>Serilog.Sinks.File</code>, the setting <code>shared</code> should be set to <code>true</code> in the <code>Args</code> section to enable <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>'s <strong>Monitoring</strong> screen functionality.
<br /><br />As this <code>shared</code> setting allows several systems to interact with the log file simultaneously, so we can have both Serilog writing to the log file and <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> reading it to display its content on the <strong>Monitoring</strong> screen.</p>
                                            </div><pre class="json" xml:space="preserve"><code>
{
  ...
  "Serilog": {
    "WriteTo": [
        {
          "Name": "File",
          "Args": {
            "path": "../Temp/Server/usercube-log.txt",
            "shared": true,
          }
        }
    ]
  }
}</code></pre>
                                            <h2 id="qradar">QRadar</h2>
                                            <p>QRadar is a supported destination for <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>'s logs.</p>
                                            <p>See the <a href="how-tos/qradar-setting/index.html" target="_parent" title="Export Logs to a Log Management System" alt="Export Logs to a Log Management System" class="MCXref xref">
              
              Export Logs to a Log Management System
              </a> topic to learn how to send <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>'s logs to your QRadar system.</p>
                                            <p>Three output formats are available for QRadar-routed logs:</p>
                                            <ul>
                                                <li>JSON</li>
                                                <li>RFC3164</li>
                                                <li>RFC5424</li>
                                            </ul>
                                            <h4 id="json-output">JSON output</h4>
                                            <p>JSON output uses <em>Serilog.Sinks.Network</em> sink.</p>
                                            <p>The following configures a QRadar JSON output for a QRadar server located at <code>192.168.13.110</code>.</p><pre class="json" xml:space="preserve"><code><em>appsettings.json</em>
{
  ...
"Serilog": {
    "Using": [
      "Serilog.Sinks.Network"
    ],
    "MinimumLevel": {
      "Default": "Error",
      "Override": {
          "Usercube": "Information"
      }
    },
    "WriteTo": [
      {
        "Name": "Logger",
        "Args": {
          "configureLogger": {
            "MinimumLevel": {
                "Default": "Information"
            },
            "WriteTo": [
              {
                "Name": "UDPSink",
                "Args": {
                  "uri": "192.168.13.110",
                  "port": "514",
                  "textFormatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
                }
              }
            ],
            "Filter": [
              {
                "Name": "ByIncludingOnly",
                "Args": { "expression": "StartsWith(SourceContext, 'Usercube') and EventId.Id &gt;= 500" }
              }
            ]
          }
        }
      }
    ]
  }
}</code></pre>
                                            <h4 id="rfc3164-or-rfc5424-output">RFC3164 or RFC5424 output</h4>
                                            <p>Using <code>Serilog.Sinks.SyslogMessages</code><em>Sink</em>, the <strong>Serilog.writeTo.configureLogger.Args.format</strong> attribute is set to <code>RFC3164</code>  or <code>RFC5424</code>.</p>
                                            <p>The following configures a QRadar RFC5424 output for a QRadar server located at <code>192.168.13.110</code>.</p><pre class="json" xml:space="preserve"><code><em>appsettings.json</em>
{
  ...
"Serilog": {
    "Using": [
      "Serilog.Sinks.Syslog"
    ],
    "MinimumLevel": {
      "Default": "Error",
      "Override": {
          "Usercube": "Information"
      }
    },
    "WriteTo": [
      {
        "Name": "Logger",
        "Args": {
          "configureLogger": {
            "MinimumLevel": {
                "Default": "Information"
            },
            "WriteTo": [
              {
                "Name": "UdpSyslog",
                "Args": {
                  "host": "192.168.13.110",
                  "port": "514",
                  "appName": "Usercube",
                  "format": "RFC5424",
                  "facility": "Local0",
                  "secureProtocols": "SecureProtocols.None",
                  "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj} </code></pre>
                                            <h2 id="application-insights">Application Insights</h2>
                                            <p><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;supports the <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview">Application Insights</a> integration. It means that you can monitor the lifecycle of the application through a dedicated interface, which can be useful to measure performance, observe how the application is used or detect performance anomalies.</p>
                                            <h3 id="configuration">Configuration</h3>
                                            <p>Both the server and the agent support the Application Insights integration. To set it up, you need to create your own Application Insights instance (see <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/create-new-resource">Create New Resource</a>). Once done, you should have an <u>instrumentation key</u>. To plug the server or the agent into the Application Insights instance, you simply have to set the key at the root of the appsettings file:</p><pre class="json" xml:space="preserve"><code><em>appsettings.json</em>
{
  ...
  "ApplicationInsights": {
    "InstrumentationKey": "YOUR-INSTRUMENTATION-KEY"
  }
}</code></pre>
                                            <div class="notices note">
                                                <p>This configuration will automatically add a <code>Serilog.Sinks.ApplicationInsights</code> to the Serilog configuration.
Thus, declaring explicitly an ApplicationInsights <em>sink</em> in the Serilog configuration is useless.
The <code>ApplicationInsights</code> section does not only affect the logging system, but also sends metrics periodically such as the percentage of CPU usage.</p>
                                            </div>
                                            <h2 id="logs-monitoring-via-user-interface">Logs Monitoring via User Interface</h2>
                                            <p><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;offers the ability to download the application logs directly through the User Interface (UI) via the <strong>Monitoring</strong> screen in the <strong>Administration</strong> section on the Dashboard.</p>
                                            <p><u>SaaS installations</u> support this feature automatically while <u>on-premises installations</u> support this in two ways. The first one is to leverage the path to the logs from the Serilog configuration when writing application logs into a single file. See the example below. The second option is described in the following subsection.</p><pre class="json" xml:space="preserve"><code><em>appsettings.json</em>
{
  ...
  "Serilog": {
    "WriteTo": [
        {
          "Name": "File",
          "Args": {
            <b>"path": "../Temp/Server/usercube-log.txt",</b>  
            <b>"shared": true,</b>
          }
        }
    ]
  }
}</code></pre>
                                            <h3 id="logspath"><code>LogsPath</code>
                                            </h3>
                                            <p>if you store <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> logs thanks to an external mechanism (the web server, etc), then you have to use the second option in order to enable this feature which is via an ad hoc parameter at the root of the appsettings called <code>LogsPath</code> indicating the path where the application logs are located:</p><pre class="json" xml:space="preserve"><code>appsettings.json
{
  ...
  "Serilog": {
    "WriteTo": [ "Console" ],
    },
  "LogsPath": "C:/inetpub/logs/LogFiles"
}</code></pre>
                                            <p>If logs are all stored in one file, provide the path to the file. If they are stored in multiple separate files within a directory, provide the path to the directory and <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;will handle providing the most recent logs.</p>
                                            <h2 id="default-configuration">Default Configuration</h2><pre class="json" xml:space="preserve"><code>appsettings.json
{
  ...
"Serilog": {
  "WriteTo": [ "Console" ],
  "Using": [ "Serilog.Sinks.File" ],
  "MinimumLevel": "Error",
  "WriteTo": [
      {
        "Name": "File",
        "Args": {
          "path": "../Temp/Server/usercube-log.txt",
          "shared": true
        }
      }
  ]
}
}</code></pre>
                                            <h2 id="configuration-examples">Configuration Examples</h2>
                                            <h3 id="write-log-messages">Write log messages</h3>
                                            <p>This example configures <em>Serilog</em> to write log messages to the <code>../Temp/Server/usercube-log.txt</code> file.</p><pre class="json" xml:space="preserve"><code>appsettings.json
{
  ...
"Serilog": {
  "WriteTo": [ "Console" ],
  "Using": [ "Serilog.Sinks.File" ],
  "MinimumLevel": "Error",
  "WriteTo": [
      {
        "Name": "File",
        "Args": {
          "path": "../Temp/Server/usercube-log.txt",
          "shared": true
        }
      }
  ]
}
}</code></pre>
                                            <h3 id="reduce-logging-process-overhead">Reduce logging process overhead</h3>
                                            <p>This example shows how to reduce the overhead of the logging process for <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>'s main thread by delegating work to a background thread, using the <em>Async</em><em>Sink</em>.</p><pre class="json" xml:space="preserve"><code>appsettings.json
{
  ...
"Serilog": {
    "MinimumLevel": {
      "Default": "Error",
      "Override": {
        "Usercube": "Debug"
      }
    },
    "WriteTo": [
      {
        "Name": "Async",
        "Args": {
          "configure": [
            {
              "Name": "File",
              "Args": {
                "path": "C:/Projects/LogTest/usercube-test.txt",
                "shared: true,
                "buffered": "true"
              }
            }
          ]
        }
      },
      {
        "Name": "Console"
      }
    ]
  }
}</code></pre>
                                        </div>
                                    </section>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>