<!DOCTYPE html>
<html lang="en-us" class="js csstransforms3d _Skins_HTML5___Side_Navigation" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Home Page|Integration Guide|Connectors|Configuration Details">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Register for Microsoft Entra ID</title>
        <link href="../../../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body class="" data-url="../../../../integration-guide/connectors/how-tos/azuread-register/">
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../../index.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <h1>Register for Microsoft Entra ID</h1>
                                    <p>This guide shows how to <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app" target="_blank" title="register" alt="register">register</a> <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;as an application, i.e. grant <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;a service account, with Microsoft Identity Platform to authenticate to a Microsoft Entra ID (formerly Azure Active Directory), and how to grant <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;the <a href="https://docs.microsoft.com/en-us/graph/permissions-reference" target="_blank" title="directory permissions" alt="directory permissions">directory permissions</a> for reading the data to be exported via the <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-graph-api" target="_blank" title="Microsoft Graph API" alt="Microsoft Graph API">Microsoft Graph API</a>.</p>
                                    <h2 id="create-a-new-registration">Create a New Registration</h2>
                                    <p>Create a new registration for <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;with Microsoft Identity Platform by proceeding as follows:</p>
                                    <ol>
                                        <li value="1">
                                            <p>Go to <a href="https://portal.azure.com/" target="_blank" title="Microsoft portal" alt="Microsoft portal">the Microsoft portal</a>.</p>
                                        </li>
                                        <li value="2">
                                            <p>Log in using the organization's credentials.</p>
                                        </li>
                                        <li value="3">
                                            <p>Find the <strong>Microsoft Entra ID</strong> menu on the left panel.</p>
                                        </li>
                                        <li value="4">
                                            <p>Go to <strong>App Registrations</strong> in the left panel.</p>
                                        </li>
                                        <li value="5">
                                            <p>Click the <strong>+ New Registration</strong> button in the top menu.</p>
                                            <p>
                                                <img src="../../../../../Resources/Images/Howtos_azuread_exportRegistration.png" alt="Azure AD Export - Add New Registration" />
                                            </p>
                                            <p>A new registration form is displayed:</p>
                                            <ul>
                                                <li>
                                                    <p>Name: display name of your application for the currently created registration. It is used to identify this registration within Microsoft Entra ID. In the case at hand, it won't be displayed to the end-user since <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;doesn't access the Microsoft Entra ID using end-user identity but <a href="https://docs.microsoft.com/en-us/graph/auth-v2-service" target="_blank" title="its own" alt="its own">its own</a>.</p>
                                                    <div class="notices info">
                                                        <p><span class="mc-variable IdentityManager.Product_Long_Name variable">Netwrix Identity Manager (formerly Usercube)</span>&#160;recommends using a mnemonic name resembling <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> Organization in order to remember it as the registration of <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;within the target Microsoft Entra ID, for example <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> Contoso.</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <p><a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-supported-account-types" target="_blank" title="Supported account types" alt="Supported account types">Supported account types</a>: select <strong>Accounts in this organizational directory only (... - Single tenant)</strong>.</p>
                                                    <p><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;uses its own identity to access the API. It doesn't access the data on behalf of a user. To authenticate, it uses credentials of a service account granted by this registration, in the form of an <b>ApplicationId</b> and a secret Client Secret.</p>
                                                    <p>See how to get <b>ApplicationId</b> and <b>ApplicationKey</b>.</p>
                                                    <p>This service account is stored in the organizational directory, and hence using the <a href="https://en.wikipedia.org/wiki/Principle_of_least_privilege" target="_blank" title="Principle of Least Privilege" alt="Principle of Least Privilege">Principle of Least Privilege</a>, only <strong>Accounts in this organizational directory</strong> are supported for authentication within this registration scope.</p>
                                                </li>
                                                <li>
                                                    <p>Redirect URI:</p>
                                                    <ul>
                                                        <li>The left combo box represents the type of application. It influences the authorization protocol exchanges. <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;is of type Web.</li>
                                                        <li>The right line edit isn't applicable to our case and should be left blank. It is used for end-user authentication, but doesn't apply to <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>.</li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                        <li value="6">
                                            <p>Confirm the registration with the <strong>Register</strong> button at the bottom of the page.</p>
                                        </li>
                                    </ol>
                                    <h3 id="get-the-applications-identifier">Get the application's identifier</h3>
                                    <p><b>ApplicationId</b> is available in the registration overview. Get it by proceeding as follows:</p>
                                    <ol>
                                        <li value="1">
                                            <p>Go to <strong>App Registrations</strong> in the left panel.</p>
                                        </li>
                                        <li value="2">
                                            <p>Select <strong>Owned applications</strong> &gt; <strong><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span></strong>.</p>
                                        </li>
                                        <li value="3">
                                            <p>Go to <strong>Overview</strong> in the left panel.</p>
                                            <p>The <strong>Essentials</strong> top panel displays the <strong>Application (client) ID</strong> required by the <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;Agent. The same page also displays the <strong>Directory (tenant) ID</strong> that will also be needed by the <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;Agent.</p>
                                            <p style="text-align: center;">
                                                <img src="../../../../../Resources/Images/Howtos_azuread_exportApplicationId.png" alt="Azure AD Export - New ApplicationId" style="width: 887px;height: 220px;" />
                                            </p>
                                        </li>
                                    </ol>
                                    <h3 id="get-the-applications-secret-key">Get the application's secret key</h3>
                                    <p>A <b>Client Secret</b> key needs to be generated. Get it by proceeding as follows:</p>
                                    <ol>
                                        <li value="1">
                                            <p>Go to <strong>App Registrations</strong> in the left panel.</p>
                                        </li>
                                        <li value="2">
                                            <p>Select <strong>Owned applications</strong> &gt; <strong><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span></strong>.</p>
                                        </li>
                                        <li value="3">
                                            <p>Go to <strong>Certificate &amp; Secrets</strong> in the left panel.</p>
                                        </li>
                                        <li value="4">
                                            <p>Click the <strong>+ New client secret</strong> button in the bottom panel <strong>Client Secrets</strong>.</p>
                                        </li>
                                        <li value="5">
                                            <p>Input a mnemonic name such as <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span> Organization Secret.</p>
                                        </li>
                                        <li value="6">
                                            <p>It is recommended to use a short <strong>expiration period</strong> such as 1 year.</p>
                                        </li>
                                        <li value="7">
                                            <p>Confirm the creation with the <strong>Add</strong> button.</p>
                                            <p>The Client Secret is now listed in the bottom panel <strong>Client Secrets</strong>. The Client Secret value is needed by the <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;Agent settings file.</p>
                                            <p style="text-align: center;">
                                                <img src="../../../../../Resources/Images/Howtos_azuread_exportSecret.png" alt="Azure AD Export - New Client Secret" style="width: 923px;height: 491px;" />
                                            </p>
                                            <div class="notices note">
                                                <p>The <b>Client Secret</b> value is only displayed in the UI in plain text at first. After a while, it is only displayed as <code>**************</code>. It should hence be stored in the appsettings.agent.json file or an environment variable as soon as it is created, to be used subsequently by <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>. If the key is lost, a new key can be created to replace the lost one.</p>
                                            </div>
                                        </li>
                                    </ol>
                                    <h2 id="grant-directory-permissions">Grant Directory Permissions</h2>
                                    <p>Grant <span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span>&#160;directory permissions by proceeding as follows:</p>
                                    <ol>
                                        <li value="1">
                                            <p>Go to <strong>App Registrations</strong> in the left panel.</p>
                                        </li>
                                        <li value="2">
                                            <p>Select <strong>Owned applications</strong> &gt; <strong><span class="mc-variable IdentityManager.Product_Stort_Name variable">Identity Manager</span></strong>.</p>
                                        </li>
                                        <li value="3">
                                            <p>Go to <strong>API Permissions</strong> in the left panel.</p>
                                        </li>
                                        <li value="4">
                                            <p>Click on the <strong>+ Add a permission</strong> button.</p>
                                            <p style="text-align: center;">
                                                <img src="../../../../../Resources/Images/Howtos_azuread_exportPermissions.png" alt="Azure AD Export - Add Permission" style="width: 895px;height: 259px;" />
                                            </p>
                                        </li>
                                        <li value="5">
                                            <p>Go to <strong>Microsoft graph</strong> &gt; <strong>Application permissions</strong>.</p>
                                        </li>
                                        <li value="6">
                                            <p>Search and open the <b>Directory</b> category.</p>
                                        </li>
                                        <li value="7">
                                            <p>Check the <b>Directory.Read.All</b>  permission.</p>
                                            <div class="notices note">
                                                <p>If you plan on configuring fulfillment too, you must only check the <b>Directory.ReadWrite.All</b> permission.</p>
                                            </div>
                                            <p style="text-align: center;">
                                                <img src="../../../../../Resources/Images/Howtos_azuread_exportDirectoryPermission.png" alt="Azure AD Export - Directory Permission" style="width: 604px;height: 645px;" />
                                            </p>
                                        </li>
                                        <li value="8">
                                            <p>Confirm with the <strong>Add permissions</strong> button at the bottom of the page.</p>
                                            <p>You now see the Directory.Read.All or Directory.ReadWrite.All permission in the <strong>Configured permissions</strong> list with a <strong> ⚠ Not granted for ...</strong> status.</p>
                                        </li>
                                        <li value="9">
                                            <p>Grant admin consent by clicking on <strong>√ Grant admin consent for</strong> name of the organization.</p>
                                            <p style="text-align: center;">
                                                <img src="../../../../../Resources/Images/Howtos_azuread_exportAdminConsent.png" alt="Azure AD Export - Grant Admin Consent" style="width: 807px;height: 202px;" />
                                            </p>
                                            <p>You should now see the status displayed as <strong>√ Granted for</strong> name of the organization.</p>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>