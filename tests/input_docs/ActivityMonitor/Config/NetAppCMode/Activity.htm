<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Stealthbits_WebsiteSkin" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedHeader%]|[%=System.LinkedTitle%]|NAS Device Configuration" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>NetApp Data ONTAP Cluster-Mode Activity Auditing Configuration</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../ActivityMonitor/Overview.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>
                                        <script type="text/javascript" src="../../Resources/zzJavaScript/plugins.min.js">
                                        </script>
                                    </p>
                                    <div role="main" id="mc-main-content">
                                        <h1>NetApp Data ONTAP Cluster-Mode Activity Auditing Configuration</h1>
                                        <p>The <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> agent employed to monitor NetApp leverages NetApp ONTAP API, and the NetApp FPolicy framework to monitor file system events. This includes both NetApp 7-Mode and Cluster-Mode configurations. For more information  about FPolicy  read the <a href="https://library.netapp.com/ecmdocs/ECMP1401220/html/GUID-54FE1A84-6CF0-447E-9AAE-F43B61CA2138.html" target="_blank" title="What are the two parts of the FPolicy solution " alt="What are the two parts of the FPolicy solution ">What are the two parts of the FPolicy solution </a> article.</p>
                                        <p><span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> requires two communication channels for ONTAP monitoring:</p>
                                        <ol>
                                            <li value="1">
                                                <p><span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> Agent connects to ONTAP on port 80 or 443 for access to ONTAP API (ONTAPI/ZAPI or REST API).</p>
                                            </li>
                                            <li value="2">
                                                <p>Data LIFs of the SVM connect to <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> Agent on port 9999 for FPolicy notifications.</p>
                                            </li>
                                        </ol>
                                        <p>The ONTAP API access is mandatory; without the API access the agent will not be able to receive and translate events from FPolicy. Both classic ONTAPI/ZAPI and the new REST API are supported. The agent uses the API to retrieve information about the storage virtual machines (SVM):&#160;CIFS settings, list of volumes, list of LIFs. Depending on the configuration, the agent can also retrieve the state of FPolicy to ensure it is enabled; configure FPolicy and register or unregister itself.</p>
                                        <p>The FPolicy framework enables the collection of audit events on the ONTAP side and their transfer to the agent(s) via the designated Data LIFs. Each LIF establishes its own connection with one or several agents and sends notifications as soon as the file transaction occurs. The FPolicy connection is asynchronous and buffered; both ONTAP and <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> have techniques in place to make sure that connections are alive and working. The connection can be secured using TLS with server or mutual authentication. </p>
                                        <p>FPolicy may have a significant impact on file system throughput, and it is always a best practice to monitor performance when enabling FPolicy. </p>
                                        <p class="Recommended-1" data-mc-autonum="&lt;span style=&quot;color: #fb8000;&quot; class=&quot;mcFormatColor&quot;&gt;&lt;b&gt;&lt;i&gt;RECOMMENDED: &lt;/i&gt;&lt;/b&gt;&lt;/span&gt;"><span class="autonumber"><span class="Recommended"><span style="color: #fb8000;" class="mcFormatColor"><b><i>RECOMMENDED: </i></b></span></span></span>Create a tailored FPolicy which only collects the desired activity from the environment to limit the scope and impact.</p>
                                        <p>For scale-out and fault tolerance purposes, the product supports a range of deployment options. A single agent can receive events from multiple SVMs. Or events from a single SVM can be distributed among multiple agents. Or a set of SVMs can distribute events among a set of agents. The choice depends on the fault tolerance requirements and the expected event flow. As a rule of thumb, the <i>average</i> load on a single agent should not exceed 5000 events per second.</p>
                                        <p>Starting with ONTAP 9.15.1, the FPolicy Persistent Store provides resilience and predictable latency during scenarios such as network delays or bursts of activity. The feature uses a dedicated volume for each SVM as a staging buffer before events are sent to the agent. FPolicy will automatically create a volume if one does not already exist. </p>
                                        <p class="Recommended-1" data-mc-autonum="&lt;span style=&quot;color: #fb8000;&quot; class=&quot;mcFormatColor&quot;&gt;&lt;b&gt;&lt;i&gt;RECOMMENDED: &lt;/i&gt;&lt;/b&gt;&lt;/span&gt;"><span class="autonumber"><span class="Recommended"><span style="color: #fb8000;" class="mcFormatColor"><b><i>RECOMMENDED: </i></b></span></span></span>Enable the Persistent Store feature and allow it to create a volume automatically.</p>
                                        <h2>Configuration Checklist</h2>
                                        <p>Complete the following checklist prior to configuring the activity monitoring of NetApp Data ONTAP Cluster-Mode devices. Instructions for each item of the checklist are detailed within the following sections.</p>
                                        <p class="Bold_Subheading">Checklist Item 1: Plan Deployment</p>
                                        <ul>
                                            <li>
                                                <p>Gather the following information:</p>
                                                <ul>
                                                    <li>
                                                        <p>Names of the SVM(s) to be monitored</p>
                                                        <ul>
                                                            <li>
                                                                <p>FPolicy is configured for each SVM separately</p>
                                                            </li>
                                                            <li>
                                                                <p>This should be the SVM(s) hosting the CIFS or NFS shares(s) to be monitored</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <p>Credentials to access ONTAP to provision a role and account.</p>
                                                    </li>
                                                    <li>
                                                        <p>
                                                            <p>Desired functionality level:</p>
                                                            <ul>
                                                                <li>
                                                                    <p><i>Manual</i>. A user configures FPolicy manually and ensures it stays enabled.</p>
                                                                </li>
                                                                <li>
                                                                    <p><i>Enable and Connect FPolicy</i>. The product ensures that FPolicy stays enabled and connected all the time. RECOMMENDED.</p>
                                                                </li>
                                                                <li>
                                                                    <p><i>Configure FPolicy</i>. The product configures FPolicy automatically and ensures it stays enabled and connected all the time. RECOMMENDED.</p>
                                                                </li>
                                                            </ul>
                                                        </p>
                                                    </li>
                                                    <li>
                                                        <p>Volumes or shares on each SVM to be monitored</p>
                                                        <ul>
                                                            <li>
                                                                <p>Limiting the FPolicy to select volumes or shares is an effective way to limit the performance impact of FPolicy</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <p>Successful/failed file operations to be monitored</p>
                                                        <ul>
                                                            <li>
                                                                <p>Limiting the FPolicy to specific file operations is an effective way to limit the performance impact of FPolicy</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <p>IP Address of the server(s) where the <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> Agent is deployed</p>
                                                    </li>
                                                    <li>
                                                        <p>API enabled in ONTAP:&#160;the classic ONTAPI/ZAPI or the new REST&#160;API</p>
                                                        <ul>
                                                            <li>
                                                                <p>
                                                                    <p>The product supports the REST&#160;API for ONTAP&#160;9.13.1 and above.</p>
                                                                </p>
                                                            </li>
                                                            <li>
                                                                <p>Volume names and sizes to be used as a Persistent Store for each SVM. This is recommended.</p>
                                                            </li>
                                                            <li>
                                                                <p>
                                                                    <p>The product supports the Persistent Store feature for ONTAP&#160;9.15.1 and later.</p>
                                                                </p>
                                                            </li>
                                                            <li>
                                                                <p>At least one local tier (aggregate) is assigned to the SVM.</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <p>Encryption and Authentication protocol for FPolicy connection</p>
                                                        <ul>
                                                            <li>
                                                                <p>No Authentication (default)</p>
                                                            </li>
                                                            <li>
                                                                <p>TLS, server authentication (the SVM authenticates the agent)</p>
                                                            </li>
                                                            <li>
                                                                <p>TLS, mutual authentication (both the SVM and the agent authenticate each other)</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p>Persistent Store  provides resilience and predictable latency in scenarios such as network delays or bursts of activity events.</p>
                                        <p>It uses a dedicated volume for each SVM as a staging buffer before the events are sent to <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> Agent.</p>
                                        <p class="Bold_Subheading">Checklist Item 2: <a href="ProvisionActivity.htm" target="_parent" title="Provision ONTAP Account" alt="Provision ONTAP Account" class="MCXref xref">Provision ONTAP Account</a></p>
                                        <ul>
                                            <li>
                                                <p>Permission names depend on the API used, ONTAPI/ZAPI or REST API.</p>
                                            </li>
                                            <li>
                                                <p>The case of domain and username created during the account provisioning process must match exactly to the credentials provided to the activity agent for authentication to work.</p>
                                            </li>
                                            <li>
                                                <p>The credential associated with the FPolicy used to monitor activity must be provisioned with access to (at minimum) the following CLI or API commands, according to the level of collection desired:</p>
                                                <ul>
                                                    <li>
                                                        <p>Manual, Collect Activity Events Only (Least Privilege)</p>
                                                        <ul>
                                                            <li>
                                                                <p>ONTAPI/ZAPI</p>
                                                                <ul>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">version</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">volume</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">vserver</code> – Readonly access</p>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                            <li>
                                                                <p>REST API</p>
                                                                <ul>
                                                                    <li>
                                                                        <p><code>/api/cluster</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/protocols/cifs/services</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/storage/volumes</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/svm/svms</code> – Readonly access</p>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <p>Employ the “Enable and connect FPolicy” Option (Less Privilege)  – RECOMMENDED</p>
                                                        <ul>
                                                            <li>
                                                                <p>ONTAPI/ZAPI</p>
                                                                <ul>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">version</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">volume</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">vserver</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>network interface</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>vserver fpolicy disable</code> – All access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>vserver fpolicy enable</code> – All access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>vserver fpolicy engine-connect</code> – All access</p>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                            <li>
                                                                <p>REST API</p>
                                                                <ul>
                                                                    <li>
                                                                        <p><code>/api/cluster</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/protocols/cifs/services</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/storage/volumes</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/svm/svms</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/network/ip/interfaces</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/protocols/fpolicy</code> – All access</p>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <p>Employ the “Configure FPolicy” Option (Automatic Configuration of FPolicy)  – RECOMMENDED</p>
                                                        <ul>
                                                            <li>
                                                                <p>ONTAPI/ZAPI</p>
                                                                <ul>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">version</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">volume</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">vserver</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>network interface</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>vserver fpolicy</code> – All access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code style="font-family: 'Courier New';">security certificate install</code> – All access (only if FPolicy uses a TLS connection)</p>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                            <li>
                                                                <p>REST API</p>
                                                                <ul>
                                                                    <li>
                                                                        <p><code>/api/cluster</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/protocols/cifs/services</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/storage/volumes</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/svm/svms</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/network/ip/interfaces</code> – Readonly access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/protocols/fpolicy</code> – All access</p>
                                                                    </li>
                                                                    <li>
                                                                        <p><code>/api/security/certificates</code> – All access  (only if FPolicy uses a TLS connection)</p>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <p><span class="mc-variable SA.Product_Short_Name variable">Access Analyzer</span> Integration requires the addition of the following CLI command:</p>
                                                        <ul>
                                                            <li>
                                                                <p><code style="font-family: 'Courier New';">security login role show-ontapi</code> – Readonly access</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p class="Bold_Subheading">Checklist Item 3: <a href="ConfigureFirewall.htm" target="_parent" title="Configure Network" alt="Configure Network" class="MCXref xref">Configure Network</a></p>
                                        <ul>
                                            <li>
                                                <p>Agent must be able to connect to ONTAP API&#160;via a management LIF on ports HTTP (80) or HTTPS (443)</p>
                                                <ul>
                                                    <li>
                                                        <p>NetApp firewall policy may need to be modified.</p>
                                                    </li>
                                                    <li>
                                                        <p>LIF's service policy may need to be modified to include <code>management-https</code> or <code>management-http</code> services.</p>
                                                    </li>
                                                    <li>
                                                        <p>Either of these ports is required. <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> requires ONTAP API access.</p>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                <p>ONTAP cluster nodes, which serve the SVM, must be able to connect to the agent on port 9999.</p>
                                                <ul>
                                                    <li>
                                                        <p>LIFs' service policy may need to be modified to include <code>data-fpolicy-client</code> service.</p>
                                                    </li>
                                                    <li>
                                                        <p>Each data serving node should have its own LIF with the <code>data-fpolicy-client</code> service.</p>
                                                    </li>
                                                    <li>
                                                        <p>The default port 9999 can be changed in the agent's settings.</p>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p class="Bold_Subheading">Checklist Item 4: <a href="ConfigureFPolicy.htm" target="_parent" title="Configure FPolicy" alt="Configure FPolicy" class="MCXref xref">Configure FPolicy</a></p>
                                        <ul>
                                            <li>
                                                <p>Remember: all FPolicy objects and SVM names are case sensitive.</p>
                                            </li>
                                            <li>
                                                <p>FPolicy must be configured for each SVM to be monitored.</p>
                                            </li>
                                            <li>
                                                <p>If using <span style="font-weight: bold;">TLS, … authentication</span> options, generate needed certificates and PEM files</p>
                                            </li>
                                            <li>
                                                <p>Select method:</p>
                                                <ul>
                                                    <li>
                                                        <p>Configure FPolicy Manually – If you want to exclude certain volumes or shares; a tailored FPolicy decreases the impact on NetApp.</p>
                                                        <ul>
                                                            <li>
                                                                <p>Required when the FPolicy account is provisioned for either Least Privileged or Less Privilege permission model</p>
                                                            </li>
                                                            <li>
                                                                <p>If using <span style="font-weight: bold;">TLS, … authentication</span> options, set authentication</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        <p>Allow the <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> to create an FPolicy automatically</p>
                                                        <ul>
                                                            <li>
                                                                <p>If using <span style="font-weight: bold;">TLS, … authentication</span> options, set authentication</p>
                                                            </li>
                                                            <li>
                                                                <p>This option is enabled using the <b>Configure FPolicy. Create or modify FPolicy objects if needed</b> checkbox for each monitored SVM.</p>
                                                            </li>
                                                            <li>
                                                                <p>It monitors file system activity on all volumes and shares of the SVM.</p>
                                                            </li>
                                                            <li>
                                                                <p>FPolicy configuration is automatically updated to reflect the <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> configuration.</p>
                                                            </li>
                                                            <li>
                                                                <p>Requires a Privileged Access credential be provided.</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                <p>Enable the Persistent Store to increase the resilience and control the latency in case of network outages or bursts of activity</p>
                                            </li>
                                        </ul>
                                        <p class="Bold_Subheading">Checklist Item 5: <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> Configuration</p>
                                        <ul>
                                            <li>
                                                <p>Deploy the <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span>  Agent to a Windows server.</p>
                                            </li>
                                            <li>
                                                <p>Configure the Agent to monitor the SVM.</p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>