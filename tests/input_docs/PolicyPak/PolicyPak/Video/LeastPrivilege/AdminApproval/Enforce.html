<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="_Skins_Netwrix_Website" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|Least Privilege Manager|[%=System.LinkedTitle%]|Admin Approval, Self Elevate, Apply on Demand, SecureCopy(TM), and UI Branding">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Understand "Enforce Admin Approval for all installers" behavior</title>
        <link href="../../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../Overview.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <h1>Understand "Enforce Admin Approval for all installers" behavior</h1>
                                    <p>Want to trap and require users to request permission when installing anything? Then use this setting; plus how to work around the byproduct of this setting.
        </p>
                                    <p><iframe width="1700" height="956" src="https://www.youtube.com/embed/tE8_hk_X7Jg" title="PPLPM Admin Approval: &quot;Enforce Admin Approval for all installers&quot;  enabled" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="1"></iframe>
                                    </p>
                                    <h3>PPLPM Admin Approval: "Enforce Admin Approval for all installers" enabled</h3>
                                    <p>Hi. This is Jeremy Moskowitz. In this video, we're going to talk about the enforce admin approval for all installers mode. You've probably been directed to this video by PolicyPak tech support or you're curious about what that switch does or maybe you read it in the manual. Let me explain it in excruciating detail.</p>
                                    <p>It starts off when you don't have it set. Here we are in the "Admin Approval Settings." The idea is that you can see "Installers" is "Not Configured" or it says "Do not enforce Admin Approval for installers." Either "Not Configured" or "Do not enforce Admin Approval for installers" will have the same default behavior.</p>
                                    <p>Let me show you what that will look like. By way of example, here's the full package of "ChromeStandalone." What happens is that we don't detect that it's an installer. If we don't detect that it's an installer, here's what happens. You get the UAC prompt because for some applications that call Windows function calls we can't get and create a PolicyPak admin prompt for you at this point.</p>
                                    <p>What this means is that Google says "Google Chrome can be installed without administrator privileges. Continue?" "Yes," let's go ahead and do that. Then users start installing stuff, and that's not good. Let's go ahead and "Cancel Installation."</p>
                                    <p>What we can do instead is turn this on. Now this has a pro and a con. Let's talk about what that is and how that works. Double click here. Go back to "Installers" and let's say "Enforce Admin Approval for all installers." In other words, try to detect if something is trying to be an installer.</p>
                                    <p>This gives you an example of something that we can detect is an installer here. There are going to be a gaggle of them that we can try to detect as installers. This is one of them. Once this is done and we've changed this method here, some behavior changes happen and we try to detect it. Let's see what happens now.</p>
                                    <p>If we now try to double click on "ChromeStandalone" as a standard user, look at that. Now the user can't install Chrome or Firefox or Dropbox or RingCentral or any of these kinds of applications. They need your approval first because we'll start detecting them as installers. So let's say you don't want to accept that. Fine. Just don't answer the phone when they ask for a "Request Code."</p>
                                    <p>On the other hand, if you did, you are welcome to at that point accept their "Request Code" here through admin approval and then give them back a "Response Code" here. Again, I'm doing this as if they were calling over the phone. This will then work: "roao – tspy." There we go. Chrome will install at this point because you've given them the admin rights to do so.</p>
                                    <p>That is the pro side of the enforce admin approval for all installers. We're going to trap these things that try to be installers and force you to get that. In fact, you can see down the lane here there's another thing that's requiring that. So you're going to have to go through with the user and you may get several prompts.</p>
                                    <p>Another application that's like this is iTunes. It also will give you several prompts down the lane, which isn't good or bad. It's just show business. I have to type it in: "roax – o8x8." There we go. Now it's complete. Now that's good to go.</p>
                                    <p>Now that's the pro side. Again, the pro side is we trap these kinds of installers. Again, another one would be "iTunesSetup." Again, the same way. We're trapping it now where before it wouldn't be trapped and you'd get halfway through.</p>
                                    <p>That's the pro side, but there is a con to this and let me show you what that looks like. Let me go ahead and "Sign out" here. The downside to this function is that when you log on you may see from time to time applications prompting the user for admin approval. I have two of them on this machine that will get annoyed when the user logs on every single time.</p>
                                    <p>One of them is going to be Java, and the second one is going to be OneDrive. I'm going to show you. There you go. Where you see "Windows Live," that's really OneDrive. If I hit "Cancel" here because I don't have a code yet as a user, here's the other one which is "Java."</p>
                                    <p>What you need is a little map to enable these programs to keep on working anyway. You're going to have to make a rule for these applications, and I'm going to show you how to do it. The way you're going to do this is either use the Event Viewer or the PolicyPak logs.</p>
                                    <p>I'm going to use the PolicyPak logs to do it. In "AppData," "Local," "PolicyPak," if we go to "PolicyPak <a href="https://www.policypak.com/products/policypak-least-privilege-manager.html" title="Least Privilege Manager">https://www.policypak.com/products/policypak-least-privilege-manager.html</a>" here, what you're looking for is the file "ppUser_operational.log." You're going to see what thing triggered that prompt.</p>
                                    <p>If we go to the bottom of this log here, we'll work backward. Here is "Java." You have a couple choices. You could use PolicyPak Application Manager and turn off the prompts for Java altogether. That's a choice, or you can make a rule. I'll go ahead and make the rule here. What I'm going to say is any time this "Command Line" is attempted to run, then go ahead and just let it run. That's okay. Not elevating it. Not doing anything special. I'm just going to go ahead and let it run.</p>
                                    <p>In order to do that, I've got a policy here that I'm going to use on the user side. I could do it on the computer side too. It really doesn't matter. I'll just do it in the same GPO. That will work just fine. I'll "Add" a "New Executable Policy" here. I want to "Use combo rule." It has to be a combo rule even though the only combination I'm using is "Command-line arguments" and "Path."</p>
                                    <p>Actually, it has no "Command-line arguments," so it's just simply a "Path." So that makes sense and, yes, I will "Apply to child processes." I'm saying when this thing tries to run, go ahead and let it. Not "Run with elevated privileges." We just want to "Allow and log." Just go ahead and let it try to run even though it may or may not do anything. We're going to go ahead and "Finish" that we've got that set.</p>
                                    <p>Let's go ahead and see if that actually worked here. Actually, I'll do both at the same time. The second one was the "OneDrive" setup. This one is a little bit more complicated. You can see the "Command Line" is this command ("<code>C:\WindowsSysWOW64OneDriveSetup.exe</code>") with this switch ("<code>/thfirstsetup</code>"). We're going to create a rule to let that work.</p>
                                    <p>We'll go ahead and go back over here. We're going to "Add" a "New Executable Policy." Again, "Use combo rule" is what we're after here. I want to make it a "Path" with "Command-line arguments" this time. What I want to say is this "Path" "<code>C:\WindowsSysWOW64OneDriveSetup.exe</code>" with the "Command-line Arguments" "<code>/thfirstsetup.</code>"</p>
                                    <p>We'll do it "Strict equality" which means it has to be just this string. You could also choose some of these other ones, but I'm going to do this exactly right which is to say guarantee those. With that in mind, "Allow and log." We should give it a "Name." "Let Onedrive setup run." Okay, there we go.</p>
                                    <p>Now at this point, let's go ahead and run GP Update ("<code>gpupdate</code>"). We'll give this a minute to finish up here. If we set it up right, we should be good to go because those two guys as you can see are smacked down. You can see this "Dialog canceled" here. "Process requires administrator privileges." We're getting blocked on purpose because you said you wanted to trap for anything that even smells like an installer.</p>
                                    <p>Let's go ahead and "Sign out" and let's go ahead and log on as this guy. Remember, what we're looking for is nothing special at all, right? Because we've said those applications that are normally not detected as installers, we are detecting them as installers but we're letting them sail through anyway. So that's what we should see here. And that's it. There's nothing else to show. It's just kind of quiet, which is exactly what we expect.</p>
                                    <p>Let's review. The idea is you want to be looking in the "Admin Approval policy" first. What we're talking about is the "Installers" "Enforce Admin Approval for all installers" which is to try to detect if something is an installer or not.</p>
                                    <p>On the plus side, it gives you added protection that requires a user to ask you for approval for things that are going to be installed. The downside is that things may be going on underneath the hood anyway that you don't even know about, and you might have to enable those things to happen naturally because now we're going to start trapping for them.</p>
                                    <p>Hope this video helps you out, and looking forward to getting started real soon.</p>
                                    <p>Thanks.</p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>