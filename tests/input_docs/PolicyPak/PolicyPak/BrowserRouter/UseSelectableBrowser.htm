<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="_Skins_Netwrix_Website" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|Browser Router|[%=System.LinkedTitle%]|Tips and Tricks">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Where does Browser Router store user selected browser (and how can I fake it if I need to) in versions 2536 and later?</title>
        <link href="../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Overview.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <h1>Where does Browser Router store user selected browser (and how can I fake it if I need to) in versions 2536 and later?</h1>
                                    <p class="Caution" data-mc-autonum="&lt;span style=&quot;color: #da0000;&quot; class=&quot;mcFormatColor&quot;&gt;&lt;b&gt;CAUTION: &lt;/b&gt;&lt;/span&gt;"><span class="autonumber"><span class="Caution"><span style="color: #da0000;" class="mcFormatColor"><b>CAUTION: </b></span></span></span>
               This article pertains to build 2536 and later. For earlier builds, the instructions are different, and technically, not supported. If using a CSE version older than 2536, please upgrade to the latest <span class="mc-variable PolicyPak.Product_Long_Name variable">Netwrix Endpoint Policy Manager (formerly PolicyPak)</span> version before using the steps in this KB.
        </p>
                                    <p><span class="mc-variable PolicyPak.Product_Short_Name variable">Endpoint Policy Manager</span> Browser Router has a function called <b>User Selectable browser</b>. Learn more about this feature first here:</p>
                                    <p><a href="../Video/BrowserRouter/UserSelectedDefault.html" target="_parent" title="Endpoint Policy Manager Browser Router User-Selected Default" alt="Endpoint Policy Manager Browser Router User-Selected Default" class="MCXref xref">Endpoint Policy Manager Browser Router User-Selected Default</a>
                                    </p>
                                    <p><a href="DefaultBrowser/Defined.htm" target="_parent" title="What is meant by &quot;Default Browser&quot; within Endpoint Policy Manager Browser router?" alt="What is meant by &quot;Default Browser&quot; within Endpoint Policy Manager Browser router?" class="MCXref xref">What is meant by "Default Browser" within Endpoint Policy Manager Browser router?</a>
                                    </p>
                                    <p>You might need to have <span class="mc-variable PolicyPak.Product_Short_Name variable">Endpoint Policy Manager</span> Browser&#160;Router indicate that a user specifically chose a particular browser, even if they did not.</p>
                                    <p>The values a particular user chose are stored for both HTTP and HTTPS. They are stored per user in the following location in the registry:</p>
                                    <p><code>"HKEY_CURRENT_USER\SOFTWARE\PolicyPak\Client-Side Extensions\{1659C456-08FC-4359-B125-BB70EE34DD55}\PPBRAgent\SavedOldValues"</code>Then within SavedOldValues there are two keys, one for HTTP and one for HTTPs.</p>
                                    <p><code>/Software/Microsoft/Windows/Shell/Associations/UrlAssociations/http/UserChoice</code>
                                    </p>
                                    <p><code>/Software/Microsoft/Windows/Shell/Associations/UrlAssociations/https/UserChoice</code>
                                    </p>
                                    <p>The first path is default browser for HTTP schema and the second one is HTTPS.</p>
                                    <p>Those two keys hold a REG_SZ called ProgID which specifies the user's chosen (or perceived) default browser.</p>
                                    <p>For instance, in this example, after the Admin has chosen User Selectable, the User chooses Edge (UWP version), with the following results:</p>
                                    <p style="text-align: center;">
                                        <img alt="" src="../../Resources/Images/BrowserRouter/507_1_image-20201229224350-1_950x136.png" style="width: 950;height: 136;" />
                                    </p>
                                    <p>Supported values in ProgID are:</p>
                                    <ul>
                                        <li>Edge (With Chromium):

	<ul><li>MSEdgeHTM</li></ul></li>
                                        <li>Edge (UWP version): 
	<ul><li>AppXq0fevzme2pys62n3e0fbqa7peapykr8v for HTTP</li><li>AppX90nv6nhay5n6a98fnetv7tpk64pp35es for HTTPS</li></ul></li>
                                        <li>Internet Explorer 
	<ul><li>IE.HTTP</li><li>IE.HTTPS</li></ul></li>
                                        <li>Chrome: 
	<ul><li>ChromeHTML</li></ul></li>
                                    </ul>
                                    <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span> Firefox uses a customized value for ProgId dependent on the version of Firefox installed. You can set the default browser to Firefox and then look under the following key to find the correct custom ProgId value:</p>
                                    <p><code>HKCU\SOFTWARE\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice\ProgId</code>
                                    </p>
                                    <p style="text-align: center;">For Example:<br /><img alt="" height="161" src="../../Resources/Images/BrowserRouter/507_2_image-20201229224350-2.png" width="831" /></p>
                                    <p>Example: If a user has not yet selected a Browser, or if MS Edge Chromium is the perceived browser, then specify the default as Chrome (one time) and allow the user to select a different browser if desired going forward.<br /></p>
                                    <p>Prerequisites: </p>
                                    <ul>
                                        <li>A PPBR User Selectable policy applied on the User Side</li>
                                        <li>Browser you wish to use as the default must be installed</li>
                                        <li>The PPBR policy should be applied AFTER the GP Preferences policy. </li>
                                    </ul>
                                    <p>To do this you'll use a Group Policy Preferences Registry Item to SET the value Only do this iff Item Level Targeting proves the value is ABSENT OR if the value is set to MSEdgeHTM (Edge Chromium).&#160;</p>
                                    <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span> The GPO must be linked to where USERS are, not COMPUTERS, because the logged-in user SID is used during this operation.</p>
                                    <p class="Step-Reset" data-mc-autonum="&lt;b&gt;Step 1 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 1 – </b></span></span>Set the value:</p>
                                    <ul>
                                        <li>
                                            <p>Hive: HKEY_CURRENT_USER</p>
                                        </li>
                                        <li>
                                            <p><code>Key Path: SOFTWARE\PolicyPak\Client-Side Extensions\{1659C456-08FC-4359-B125-BB70EE34DD55}\PPBRAgent\SavedOldValues\Software/Microsoft/Windows/Shell/Associations/UrlAssociations/http/UserChoice</code>
                                            </p>
                                        </li>
                                        <li>
                                            <p>Value Name: ProgID</p>
                                        </li>
                                        <li>
                                            <p>Value Type: REG_SZ</p>
                                        </li>
                                        <img alt="" height="360" src="../../Resources/Images/BrowserRouter/507_3_image-20201229224350-3.png" width="401" /><![CDATA[  ]]><li>ValueData: ChromeHTML</li></ul>
                                    <p class="Step" data-mc-autonum="&lt;b&gt;Step 2 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 2 – </b></span></span> (But only if the value below is absent...:</p>
                                    <p><code>HKCU\ Software\PolicyPak\Client-Side Extensions\{1659C456-08FC-4359-B125-BB70EE34DD55}\PPBRAgent\SavedOldValues\Software/Microsoft/Windows/Shell/Associations/UrlAssociations/http/UserChoice\</code>
                                    </p>
                                    <p>... or if ProgId at the location below is set to MSEdgeHTM (as verified by ILT):</p>
                                    <p><code>HKCU\ Software\PolicyPak\Client-Side Extensions\{1659C456-08FC-4359-B125-BB70EE34DD55}\PPBRAgent\SavedOldValues\Software/Microsoft/Windows/Shell/Associations/UrlAssociations/http/UserChoice\ProgId\</code>
                                    </p>
                                    <p>
                                        <img alt="" height="311" src="../../Resources/Images/BrowserRouter/507_4_image-20201229224350-4.png" width="400" />
                                    </p>
                                    <p>
                                        <img alt="" src="../../Resources/Images/BrowserRouter/507_5_image-20201229224350-5_950x366.png" style="width: 950;height: 366;" />
                                    </p>
                                    <p>Be sure to have entries which set HTTP and HTTPS like these two values here (i.e., Repeat Steps 1 &amp; 2 above for HTTPS value)</p>
                                    <p align="center" style="text-align: center;">
                                        <img alt="" height="453" src="../../Resources/Images/BrowserRouter/507_6_image-20201229224350-6.png" width="954" />
                                    </p>
                                    <p class="Remember" data-mc-autonum="&lt;span style=&quot;color: #fb8000;&quot; class=&quot;mcFormatColor&quot;&gt;&lt;i&gt;Remember, &lt;/i&gt;&lt;/span&gt;"><span class="autonumber"><span class="Remember"><span style="color: #fb8000;" class="mcFormatColor"><i>Remember, </i></span></span></span> You need two entries. One for HTTP and one for HTTPS.</p>
                                    <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span>If Chrome is not installed, PPBR will fail back to Internet Explorer. Also, for first time logins, Chrome will not become the default browser until the 2nd processing of gpupdate.For convenience the required User side Group Policy Preference XMLS are attached below:</p>
                                    <p>HTTP: <a href="https://www.policypak.com/pp-files/2020-12-29_no-default-or-default-edge- then-set-to-chrome-http.xml" target="_blank" title="XMLS file">https://www.policypak.com/pp-files/2020-12-29_no-default-or-default-edge- then-set-to-chrome-http.xml</a></p>
                                    <p>HTTPS: <a href="https://www.policypak.com/pp-files/2020-12-29_no-default-or-default-edge- then-set-to-chrome-https.xml" target="_blank">https://www.policypak.com/pp-files/2020-12-29_no-default-or-default-edge- then-set-to-chrome-https.xml</a></p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>