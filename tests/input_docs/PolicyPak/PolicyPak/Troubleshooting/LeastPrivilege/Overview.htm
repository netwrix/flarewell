<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" class="_Skins_Netwrix_Website" lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|Least Privilege Security Pak|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Troubleshooting</title>
        <link href="../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../Overview.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <h1>Troubleshooting</h1>
                                    <p><span class="mc-variable PolicyPak.Product_Short_Name variable">Endpoint Policy Manager</span> Least Privilege Manager problems can generally be divided into three categories:</p>
                                    <ul>
                                        <li>
                                            <p>Case 1: You expected a rule to bypass UAC, but it did not. </p>
                                        </li>
                                        <li>
                                            <p>Case 2: A rule is bypassing UAC, and it was not expected.</p>
                                        </li>
                                        <li>
                                            <p>Case 3: A rule is preventing an item from running when not expected.</p>
                                        </li>
                                    </ul>
                                    <p>In all cases, you can see detailed information about the occurrence within the <span class="mc-variable PolicyPak.Product_Short_Name variable">Endpoint Policy Manager</span> Least Privilege Manager log files which are found in: <code>%appdata%\local\PolicyPak\PolicyPak Least Privilege Manager and %Programdata%\PolicyPak\PolicyPak Least Privilege Manager</code></p>
                                    <p>First, you need to open the correct log file, based on the activity that has occurred, to see which <span class="mc-variable PolicyPak.Product_Short_Name variable">Endpoint Policy Manager</span> Least Privilege Manager policies you have. There are several files to check:</p>
                                    <ul>
                                        <li>
                                            <p>ppUser_OnLogon.log. This log gets new data when Group Policy applies at logon, and items are set for the User side, not the Computer side.</p>
                                        </li>
                                        <li>
                                            <p>ppUser_Switched.log. This log file is updated when Group Policy applies at logon, but items are set for the Computer side.</p>
                                        </li>
                                        <li>
                                            <p>ppUser_OnGroupPolicy.log. This log gets new data when Group Policy applies in the background when GPupdate is run, or when Group Policy applies in the background.</p>
                                        </li>
                                        <li>
                                            <p>ppUser_onPolicyChanged.log. This log file is updated when Group Policy applies in the background, or when a non-Group Policy method is used (e.g., Microsoft Endpoint Manager (SCCM and Intune) or <span class="mc-variable PolicyPak.Product_Short_Name variable">Endpoint Policy Manager</span> Cloud).</p>
                                        </li>
                                    </ul>
                                    <p>Start troubleshooting by verifying that the following conditions (seen here) are true:</p>
                                    <ul>
                                        <li>
                                            <p>You have the GPO (or file).</p>
                                        </li>
                                        <li>
                                            <p>There is a collection within the GPO.</p>
                                        </li>
                                        <li>
                                            <p>The rules are within the collection.</p>
                                        </li>
                                    </ul>
                                    <p style="text-align: center;">
                                        <img src="../../../Resources/Images/Book4/Troubleshooting/Troubleshooting_1.png" alt="A screenshot of a computer&#xA;&#xA;Description automatically generated" />
                                    </p>
                                    <p>The final log to check is the ppUser_Operational.log, which can indicate why something is denied (blocked), allowed, or elevated. It shows what was trying to run and which GPO, collection, and policy performed the action, along with the ultimate result. For example, this log shows a Deny result.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../Resources/Images/Book4/Troubleshooting/Troubleshooting_2.png" alt="A screenshot of a computer code&#xA;&#xA;Description automatically generated" />
                                    </p>
                                    <p>An Allowed result can be seen here.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../Resources/Images/Book4/Troubleshooting/Troubleshooting_3.png" alt="A screenshot of a computer code&#xA;&#xA;Description automatically generated" />
                                    </p>
                                    <p>An Elevated result can be seen here.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../Resources/Images/Book4/Troubleshooting/Troubleshooting_4.png" alt="A screenshot of a computer code&#xA;&#xA;Description automatically generated" />
                                    </p>
                                    <p>Additionally, as expressed earlier, you can also see when Admin Approval dialogs are shown to end users, when they are canceled, and which processes failed to run because they did not get Administrator privileges. In this screenshot you can see that the dialog was canceled, which means the end user was not permitted to perform an action which required a UAC prompt.</p>
                                    <p style="text-align: center;">
                                        <img src="../../../Resources/Images/Book4/Troubleshooting/Troubleshooting_5.png" alt="A screenshot of a computer program&#xA;&#xA;Description automatically generated" />
                                    </p>
                                    <p>Additionally, Admin Approval is logged in the ppUser_Operational.log file as well, which shows when applications require Admin privileges and when the user successfully enters in a response code from an Admin when he or she uses the <span class="mc-variable PolicyPak.Product_Short_Name variable">Endpoint Policy Manager</span> Admin Approval Tool. </p>
                                    <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span>The Reason Code is also stored here and is a fixed list from within the <span class="mc-variable PolicyPak.Product_Short_Name variable">Endpoint Policy Manager</span> Admin Approval Tool.</p>
                                    <div class="codeSnippet">
                                        <div style="mc-code-lang: Bash;" class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>Admin Approval Dialog (2018/07/14, 15:55:20.312, PID: 1360, TID: 3020)<br />{<br />&#160;&#160;&#160;&#160;Process requires administrator privileges<br />&#160;&#160;&#160;&#160;Dialog Guide: {3F8058CB-AB08-F878-D146-78312F2B7031} User Sid: S-1-5-&#160;&#160;&#160;&#160;21-934088035-149717768-3671783038-1116<br />&#160;&#160;&#160;&#160;User Name: FABRIKAM\EastSalesUser1 Process Id: 7072<br />&#160;&#160;&#160;&#160;Process Path: C:\Users\eastsalesuser1\Desktop\Silverlight install.exe<br />&#160;&#160;&#160;&#160;Command Line: <span style="color: #df5000; ">"C:\Users\eastsalesuser1\Desktop\Silverlight install.exe"</span><br />&#160;&#160;&#160;&#160;Task Kind: ApplicationInstaller&#160;<br />&#160;&#160;&#160;&#160;Task Hash:<br />25AA5CA53202838E3937FCFF39B3DB34C6B5A7188D28F45D7BFEDE81CF37ED6D<br />&#160;&#160;&#160;&#160;Executable: C:\Users\eastsalesuser1\Desktop\Silverlight install.exe<br />&#160;&#160;&#160;&#160;File Owner Sid: S-1-5-21-934088035-149717768-3671783038-1116<br />&#160;&#160;&#160;&#160;File Owner Name: FABRIKAM\EastSalesUser1 Trusted: No<br />&#160;&#160;&#160;&#160;Signed: Yes<br />} // End of Admin Approval Dialog, elapsed time: 00:00:00.001<br />Admin Approval Dialog (2018/07/14, 15:56:10.279, PID: 1360, TID: 2920)<br />{<br />&#160;&#160;&#160;&#160;Dialog success<br />&#160;&#160;&#160;&#160;Dialog Guid: S-1-5-21-934088035-149717768-3671783038-1116 User Sid: S-1-5-21-934088035-149717768-3671783038-1116<br />&#160;&#160;&#160;&#160;User Name: FABRIKAM\EastSalesUser1 Process Id: 7072<br />&#160;&#160;&#160;&#160;Process Path: C:\Users\eastsalesuser1\Desktop\Silverlight install.exe<br />&#160;&#160;&#160;&#160;Command Line: <span style="color: #df5000; ">"C:\Users\eastsalesuser1\Desktop\Silverlight install.exe"</span><br />&#160;&#160;&#160;&#160;Task Kind: ApplicationInstaller&#160;<br />&#160;&#160;&#160;&#160;Task Hash:<br />25AA5CA53202838E3937FCFF39B3DB34C6B5A7188D28F45D7BFEDE81CF37ED6D<br />&#160;&#160;&#160;&#160;Executable: C:\Users\eastsalesuser1\Desktop\Silverlight install.exe<br />&#160;&#160;&#160;&#160;File Owner Sid: S-1-5-21-934088035-149717768-3671783038-1116<br />&#160;&#160;&#160;&#160;File Owner Name: FABRIKAM\EastSalesUser1 Trusted: No<br />&#160;&#160;&#160;&#160;Signed: Yes<br />&#160;&#160;&#160;&#160;Reason: Application_LOB&#160;<br />&#160;&#160;&#160;&#160;Forced Elevation: No<br /></code></pre>
                                        </div>
                                    </div>
                                    <p>If requested by support, logs are automatically wrapped up and can be sent to <span class="mc-variable Netwrix.Company variable">Netwrix</span> Support with the PPLOGS.EXE command on any endpoint where the client-side extension is installed.</p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>