<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Stealthbits_WebsiteSkin" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" /><title>NetApp Data ONTAP 7-Mode Activity Auditing Configuration</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="complementary" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="Main navigation and search" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../EnterpriseAuditor/Overview.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>
                                        <script type="text/javascript" src="../../Resources/zzJavaScript/plugins.min.js">
                                        </script>
                                    </p>
                                    <div role="main" id="mc-main-content">
                                        <h1>NetApp Data ONTAP 7-Mode Activity Auditing Configuration</h1>
                                        <p>The <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> agent employed to monitor NetApp leverages 128-bit encrypted Remote Procedure Calls (RPC), NetApp ONTAP-API, and NetApp FPolicy to monitor file system events. This includes both NetApp 7-Mode and Cluster-Mode configurations. To learn more about FPolicy please visit the NetApp website and read the <a href="https://library.netapp.com/ecmdocs/ECMP1401220/html/GUID-54FE1A84-6CF0-447E-9AAE-F43B61CA2138.html" target="_blank" title="What FPolicy is" alt="What FPolicy is">What FPolicy is</a> article.</p>
                                        <p>If the activity agent is stopped, a notification will be sent to the NetApp device to disconnect and disable the associated FPolicy policy, but it will not be removed.</p>
                                        <p>If the network connection is lost between the activity agent and the NetApp device, the NetApp device is configured with a default timeout to wait for a response. If a response is not received from the Activity Agent within the timeout, then the NetApp device will disconnect and disable the FPolicy policy. The Activity Agent will check every minute by default to see if the FPolicy policy has been disabled and will enable it (if the auto-enable functionality is enabled for the agent). The default setting to check every minute is configurable.</p>
                                        <p>The NetApp FPolicy uses a “push” mechanism such that notification will only be sent to the activity agent when a transaction occurs. Daily activity log files are created only if activity is performed. No activity log file will be created if there is no activity for the day.</p>
                                        <p class="Bold_Subheading">Configuration Checklist</p>
                                        <p>Complete the following checklist prior to configuring activity monitoring of NetApp Data ONTAP 7-Mode devices. Instructions for each item of the checklist are detailed within the following topics.</p>
                                        <p><span style="font-weight: bold;">Checklist Item 1</span>: Plan Deployment</p>
                                        <ul>
                                            <li>Gather the following information:<ul><li>Names of the vFiler™(s) to be monitored</li><li>DNS name of the CIFS shares(s) to be monitored</li></ul></li>
                                        </ul>
                                        <p><span style="font-weight: bold;">Checklist Item 2</span>: <a href="ProvisionActivity.htm" target="_parent" title="Provision FPolicy Account" alt="Provision FPolicy Account" class="MCXref xref">Provision FPolicy Account</a></p>
                                        <ul>
                                            <li>
                                                <p>Group membership with a role granting access to the following commands:</p>
                                                <div class="codeSnippet">
                                                    <div style="mc-code-lang: CPP;" class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>login<span style="color: #000000; ">-</span>http<span style="color: #000000; ">-</span>admin<br />api<span style="color: #000000; ">-</span>system<span style="color: #000000; ">-</span>api<span style="color: #000000; ">-</span>list<br />api<span style="color: #000000; ">-</span>system<span style="color: #000000; ">-</span>get<span style="color: #000000; ">-</span>version<br />api<span style="color: #000000; ">-</span>cifs<span style="color: #000000; ">-</span>share<span style="color: #000000; ">-</span>list<span style="color: #000000; ">-</span>iter<span style="color: #000000; ">-*</span><br />api<span style="color: #000000; ">-</span>volume<span style="color: #000000; ">-</span>list<span style="color: #000000; ">-</span>info<span style="color: #000000; ">-</span>iter<span style="color: #000000; ">-*</span></code></pre>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <p>For Automatic FPolicy creation (Checklist Item 4), group membership with a role granting access to the following command:</p>
                                                <div class="codeSnippet">
                                                    <div style="mc-code-lang: CPP;" class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>api<span style="color: #000000; ">-</span>fpolicy<span style="color: #000000; ">*</span></code></pre>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <p>To use the “Enable and connect FPolicy” option within the <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span>, group membership with a role granting access to the following command:</p>
                                                <div class="codeSnippet">
                                                    <div style="mc-code-lang: CPP;" class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>cli<span style="color: #000000; ">-</span>fpolicy<span style="color: #000000; ">*</span></code></pre>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <p>Group membership in:</p>
                                                <ul>
                                                    <li>
                                                        <p>ONTAP Power Users </p>
                                                    </li>
                                                    <li>
                                                        <p>ONTAP Backup Operators </p>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p><span style="font-weight: bold;">Checklist Item 3</span>: Firewall Configuration</p>
                                        <ul>
                                            <li>
                                                <p>HTTP (80) or HTTPS (443)</p>
                                            </li>
                                            <li>
                                                <p>HTTP or HTTPS protocols need to be enabled on the NetApp filer</p>
                                            </li>
                                            <li>
                                                <p class="ListContinue">TCP 135</p>
                                            </li>
                                            <li>
                                                <p>TCP 445</p>
                                            </li>
                                            <li>
                                                <p>Dynamic port range: TCP/UDP 137-139</p>
                                            </li>
                                            <li>
                                                <p>See the <a href="EnableHTTP.htm" target="_parent" title="Enable HTTP or HTTPS" alt="Enable HTTP or HTTPS" class="MCXref xref">Enable HTTP or HTTPS</a> topic for instructions.</p>
                                            </li>
                                        </ul>
                                        <p><span style="font-weight: bold;">Checklist Item 4</span>: <a href="ConfigureFPolicy.htm" target="_parent" title="Configure FPolicy" alt="Configure FPolicy" class="MCXref xref">Configure FPolicy</a></p>
                                        <ul>
                                            <li>
                                                <p>If using vFilers:</p>
                                                <ul>
                                                    <li>
                                                        <p>FPolicy operates on the vFiler so the FPolicy must be created on the vFiler</p>
                                                        <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span><span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> must target the vFiler</p>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="ListContinue">
                                                <p class="ListContinue">Select method:</p>
                                                <p class="Recommended-1" data-mc-autonum="&lt;span style=&quot;color: #fb8000;&quot; class=&quot;mcFormatColor&quot;&gt;&lt;b&gt;&lt;i&gt;RECOMMENDED: &lt;/i&gt;&lt;/b&gt;&lt;/span&gt;"><span class="autonumber"><span class="Recommended"><span style="color: #fb8000;" class="mcFormatColor"><b><i>RECOMMENDED: </i></b></span></span></span>Configure FPolicy Manually – A tailored FPolicy </p>
                                                <ul>
                                                    <li class="ListContinue">Allow the <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> to create an FPolicy automatically<ul><li class="ListContinue">This option is enabled when the <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> agent is configured to monitor the NetApp device on the NetApp FPolicy Configuration page of the Add New Hosts window.</li><li class="ListContinue">It monitors all file system activity.</li></ul></li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p><span style="font-weight: bold;">Checklist Item 5</span>: <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> Configuration</p>
                                        <ul>
                                            <li>
                                                <p>Deploy the <span class="mc-variable SAM.Product_Short_Name variable">Activity Monitor</span> Activity Agent to a Windows proxy server</p>
                                            </li>
                                            <li>
                                                <p>Configure the Activity Agent to monitor the NetApp device</p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>