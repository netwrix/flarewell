<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Stealthbits_WebsiteSkin" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="shortcut icon" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon-16x16.png" /><title>Recommended Configuration for the AWS&#160;Solution</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="complementary" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="Main navigation and search" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../Overview.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>
                                        <script type="text/javascript" src="../../../Resources/zzJavaScript/plugins.min.js">
                                        </script>
                                    </p>
                                    <div role="main" id="mc-main-content">
                                        <h1>Recommended Configuration for the AWS&#160;Solution</h1>
                                        <p>The AWS Solution is configured to inherit settings from the global Settings node. The Connection Profile must be assigned before job execution. Once it is assigned to the job group, it can be run directly or scheduled.</p>
                                        <p class="Bold_Subheading">Dependencies</p>
                                        <p>For AWS IAM Auditing:</p>
                                        <ul>
                                            <li>
                                                <p>AWS Permissions must be configured on the target databases.</p>
                                                <ul>
                                                    <li>
                                                        <p>See the <a href="../../Requirements/Target/Config/AWS.htm" title="Configure AWS for Scans" alt="Configure AWS for Scans" target="_parent" class="MCXref xref">Configure AWS for Scans</a> topic for information on configuring Roles within AWS and obtaining an Access Key</p>
                                                    </li>
                                                    <li>
                                                        <p>See the <a href="../../Requirements/Target/AWS.htm" target="_parent" title="Target Amazon Web Service Requirements, Permissions, and Ports" alt="Target Amazon Web Service Requirements, Permissions, and Ports" class="MCXref xref">Target Amazon Web Service Requirements, Permissions, and Ports</a> topic for additional information on permissions</p>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p>Some of the 0.Collection job group queries can be scoped to target specific S3 Objects. However, it is necessary for the SA_AWS_Instances table to be populated before attempting to scope the queries. Therefore, the AWS_S3Scan job must be manually executed before attempting to scope the S3 queries.</p>
                                        <p class="Bold_Subheading">Target Host</p>
                                        <p>The AWS Data Collector identifies AWS instances via the created Roles and therefore does not require a host list to be assigned. No target host is required (assign Local Host).</p>
                                        <p class="Bold_Subheading">Connection Profile</p>
                                        <p>The AWS Data Collector requires a specific set of permissions. The account used can be either a Web Services (JWT) account or an Amazon Web Services account. Once the account has been provisioned, create a custom Connection Profile containing the credentials for the targeted environment. See the <a href="../../Admin/Settings/Connection/Profile/AWS.htm" target="_parent" title="Amazon Web Services for User Credentials" alt="Amazon Web Services for User Credentials" class="MCXref xref">Amazon Web Services for User Credentials</a> topic for additional information.</p>
                                        <p>The Connection Profile is assigned under the <b>AWS</b> &gt; <b>Settings</b> &gt; <b>Connection</b> node. It is set to <b>Use Default Profile</b>, as configured at the global Settings level. However, if this is not the Connection Profile with the necessary permissions for targeting the AWS instances, click the <b>Select one of the following user defined profiles</b> option and select the appropriate Connection Profile.</p>
                                        <p>See the <a href="../../Admin/Settings/Connection/Overview.htm" target="_parent" title="Connection" alt="Connection" class="MCXref xref">Connection</a> topic for additional information on creating a Connection Profile. </p>
                                        <p class="Bold_Subheading">Access Token</p>
                                        <p>Creating the Connection Profile requires having the <b>Access Key ID</b> and the <b>Secret Access Key</b> that was generated by the Amazon Web Services application. See the <a href="../../Requirements/Target/Config/AWS.htm" target="_parent" title="Configure AWS for Scans" alt="Configure AWS for Scans" class="MCXref xref">Configure AWS for Scans</a> topic for additional information.</p>
                                        <p class="Bold_Subheading">Schedule Frequency</p>
                                        <p>Schedule the AWS job group to run weekly or daily, depending on the amount of data in the environment. If there are frequent AWS changes within the target environment, then it can be executed more often. It is best to rerun it anytime AWS changes might have occurred.</p>
                                        <p class="Bold_Subheading">History Retention</p>
                                        <p>Not supported.</p>
                                        <p class="Bold_Subheading">Multi Console Support</p>
                                        <p>Not supported.</p>
                                        <p class="Bold_Subheading">Run Order</p>
                                        <p>The jobs in the 0.Collection job group must be run first and in order. The other job groups can be run in any order, together or individually, after running the 0.Collection job group.</p>
                                        <p class="Recommended-1" data-mc-autonum="&lt;span style=&quot;color: #fb8000;&quot; class=&quot;mcFormatColor&quot;&gt;&lt;b&gt;&lt;i&gt;RECOMMENDED: &lt;/i&gt;&lt;/b&gt;&lt;/span&gt;"><span class="autonumber"><span class="Recommended"><span style="color: #fb8000;" class="mcFormatColor"><b><i>RECOMMENDED: </i></b></span></span></span>Run the solution at the top level.</p>
                                        <p class="Bold_Subheading">Run at the Solution Level</p>
                                        <p>The jobs in the AWS job group should be run together and in order by running the entire solution, instead of the individual jobs.</p>
                                        <p class="Bold_Subheading">Run at the Job Group Level</p>
                                        <p>For environments with a large amount of S3 data, it may be desirable to run the 3.AWS_S3Scan job and the 4.AWS_S3SDDScan job less frequently than the other jobs in the 0.Collection job group.</p>
                                        <p class="Bold_Subheading">Query Configuration</p>
                                        <p>The following queries in the 0.Collection job group require the created AWS Roles to be added to the Login Roles page:</p>
                                        <ul>
                                            <li>
                                                <p><a href="Collection/1.AWS_OrgScan.htm" target="_parent" title="1.AWS_OrgScan Job" alt="1.AWS_OrgScan Job" class="MCXref xref">1.AWS_OrgScan Job</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Collection/2.AWS_S3Scan.htm" target="_parent" title="2.AWS_S3Scan Job" alt="2.AWS_S3Scan Job" class="MCXref xref">2.AWS_S3Scan Job</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Collection/3.AWS_IAMScan.htm" target="_parent" title="3.AWS_IAMScan Job" alt="3.AWS_IAMScan Job" class="MCXref xref">3.AWS_IAMScan Job</a>
                                                </p>
                                            </li>
                                        </ul>
                                        <p>The following queries in the 0.Collection job group can be modified to limit the depth of the scan:</p>
                                        <ul>
                                            <li>
                                                <p><a href="Collection/2.AWS_S3Scan.htm" target="_parent" title="2.AWS_S3Scan Job" alt="2.AWS_S3Scan Job" class="MCXref xref">2.AWS_S3Scan Job</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Collection/4.AWS_S3SDDScan.htm" target="_parent" title="4.AWS_S3SDDScan Job" alt="4.AWS_S3SDDScan Job" class="MCXref xref">4.AWS_S3SDDScan Job</a>
                                                </p>
                                            </li>
                                        </ul>
                                        <p class="Bold_Subheading">Analysis Configuration</p>
                                        <p>This solution can be run with the default analysis configuration. However, the following parameters can be modified:</p>
                                        <ul>
                                            <li>
                                                <p>The <code>@STALETHRESHOLD</code> parameter determines the number of days after which content is considered stale. It is set to default of 60 days. The <code>@STALETHRESHOLD</code> parameter can be customized in the following analysis tasks:</p>
                                                <ul>
                                                    <li>
                                                        <p><b>2. Users</b> &gt; <b>AWS_StaleUsers</b> &gt; <b>Stale Users</b> Analysis Task</p>
                                                    </li>
                                                    <li>
                                                        <p><b>3.Groups</b> &gt; <b>AWS_StaleGroups</b> &gt; <b>Stale Groups Details</b> Analysis Task</p>
                                                    </li>
                                                    <li>
                                                        <p><b>4.Roles</b> &gt; <b>AWS_StaleRoles</b> &gt; <b>Stale Roles Details</b> Analysis Task</p>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p class="Bold_Subheading">Workflow</p>
                                        <p>The following is the recommended workflow:</p>
                                        <p class="Step-Reset" data-mc-autonum="&lt;b&gt;Step 1 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 1 – </b></span></span>Configure and assign the Connection Profile.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 2 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 2 – </b></span></span>Configure the Scan query to add the AWS Roles to the Login Roles page.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 3 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 3 – </b></span></span>(Optional) Modify query configurations for the 0.Collection job group to limit the scan depth.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 4 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 4 – </b></span></span>(Optional) Modify analysis task parameters for the reporting jobs.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 5 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 5 – </b></span></span>Schedule the AWS job group to run as desired.</p>
                                        <p class="Step" data-mc-autonum="&lt;b&gt;Step 6 – &lt;/b&gt;"><span class="autonumber"><span class="Step"><b>Step 6 – </b></span></span>Review the reports generated by the AWS job group.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>