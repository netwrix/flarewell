<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Stealthbits_WebsiteSkin" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" /><title>SQL Data Collector</title>
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Resources/Stylesheets/StealthbitsTemplate.css" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="complementary" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="Main navigation and search" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../Overview.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>
                                        <script type="text/javascript" src="../../../../Resources/zzJavaScript/plugins.min.js">
                                        </script>
                                    </p>
                                    <div role="main" id="mc-main-content">
                                        <h1>SQL Data Collector</h1>
                                        <p>The SQL Data Collector provides information on database configuration, permissions, data extraction, application name of the application responsible for activity events, an IP Address or Host name of the client server, and sensitive data reports. This data collector also provides information on Oracle databases including infrastructure and operations. </p>
                                        <p style="margin-bottom: 0pt;">The SQL Data Collector has been preconfigured within the Database data collection jobs for Db2, MySQL, Oracle,&#160;PostgreSQL, Redshift, and SQL&#160;Server databases. Both this data collector and the Database Solution are available with a special <span class="mc-variable SA.Product_Short_Name variable">Access Analyzer</span> license. See the following topics for additional information:</p>
                                        <ul>
                                            <li>
                                                <p><a href="../../../Solutions/Databases/DB2/Overview.htm" target="_parent" title="Db2 Solution" alt="Db2 Solution" class="MCXref xref">Db2 Solution</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="../../../Solutions/Databases/MySQL/Overview.htm" target="_parent" title="MySQL Solution" alt="MySQL Solution" class="MCXref xref">MySQL Solution</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="../../../Solutions/Databases/PostgreSQL/Overview.htm" target="_parent" title="PostgreSQL Solution" alt="PostgreSQL Solution" class="MCXref xref">PostgreSQL Solution</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="../../../Solutions/Databases/Oracle/Overview.htm" target="_parent" title="Oracle Solution" alt="Oracle Solution" class="MCXref xref">Oracle Solution</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="../../../Solutions/Databases/Redshift/Overview.htm" target="_parent" title="Redshift Solution" alt="Redshift Solution" class="MCXref xref">Redshift Solution</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="../../../Solutions/Databases/SQL/Overview.htm" target="_parent" title="SQL Solution" alt="SQL Solution" class="MCXref xref">SQL Job Group</a>
                                                </p>
                                            </li>
                                        </ul>
                                        <p class="Bold_Subheading">Protocols</p>
                                        <p>TCP</p>
                                        <p class="Bold_Subheading">Ports</p>
                                        <p>For Db2:</p>
                                        <ul>
                                            <li>
                                                <p>Specified by Instances table (default is 5000)</p>
                                            </li>
                                        </ul>
                                        <p>For MySQL:</p>
                                        <ul>
                                            <li>
                                                <p>Specified by Instances table (default is 3306)</p>
                                            </li>
                                        </ul>
                                        <p>For Oracle:</p>
                                        <ul>
                                            <li>
                                                <p> Specified by Instances table (default is 1521)</p>
                                            </li>
                                        </ul>
                                        <p>For PostgreSQL:</p>
                                        <ul>
                                            <li>
                                                <p>Specified by Instances table (default is 5432)</p>
                                            </li>
                                        </ul>
                                        <p>For SQL: </p>
                                        <ul>
                                            <li>
                                                <p>Specified by Instances table (default is 1433)</p>
                                            </li>
                                        </ul>
                                        <p class="Bold_Subheading">Permissions</p>
                                        <p>For MySQL:</p>
                                        <ul>
                                            <li>
                                                <p>Read access to MySQL&#160;instance to include all databases contained within each instance</p>
                                            </li>
                                            <li>
                                                <p>Windows Only — Domain Admin or Local Admin privilege</p>
                                            </li>
                                        </ul>
                                        <p>For Oracle:</p>
                                        <ul>
                                            <li>
                                                <p>User with SYSDBA role</p>
                                            </li>
                                            <li>
                                                <p>Local Administrator on the target servers – Only applies to Windows Servers and not on Linux or Unix operating systems</p>
                                            </li>
                                        </ul>
                                        <p>For PostgreSQL:</p>
                                        <ul>
                                            <li>
                                                <p>Read access to all the databases in PostgreSQL cluster or instance</p>
                                            </li>
                                            <li>
                                                <p>Windows Only — Domain Admin or Local Admin privilege</p>
                                            </li>
                                        </ul>
                                        <p>For Redshift:</p>
                                        <ul>
                                            <li>
                                                <p>Read-access to the following tables:</p>
                                                <ul>
                                                    <li>
                                                        <p>pg_tables</p>
                                                    </li>
                                                    <li>
                                                        <p>pg_user</p>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p>For SQL: </p>
                                        <ul>
                                            <li>
                                                <p>For Instance Discovery, local rights on the target SQL Servers:</p>
                                                <ul>
                                                    <li>
                                                        <p>Local group membership to Remote Management Users</p>
                                                    </li>
                                                    <li>
                                                        <p>Permissions on the following WMI NameSpaces: <code>root\Microsoft\SQLServer, root\interop</code></p>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                <p>For permissions for data collection:</p>
                                                <ul>
                                                    <li>
                                                        <p>Read access to SQL instance</p>
                                                    </li>
                                                    <li>
                                                        <p>Requires SQL Full-Text and Semantic Extractions for Search feature to be installed on the target SQL instance(s) when using the <b>Scan full rows for sensitive data</b> option on the Options wizard page</p>
                                                    </li>
                                                    <li>
                                                        <p>Grant Authenticate Server to [DOMAIN\USER]</p>
                                                    </li>
                                                    <li>
                                                        <p>Grant Connect SQL to [DOMAIN\USER]</p>
                                                    </li>
                                                    <li>
                                                        <p>Grant View any database to [DOMAIN\USER]</p>
                                                    </li>
                                                    <li>
                                                        <p>Grant View any definition to [DOMAIN\USER]</p>
                                                    </li>
                                                    <li>
                                                        <p>Grant View server state to [DOMAIN\USER]</p>
                                                    </li>
                                                    <li>
                                                        <p>Grant Control Server to [DOMAIN\USER] (specifically required for the Weak Passwords Job)</p>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p>See the <a href="../../../Requirements/Target/Config/AzureSQLAccess.htm" target="_parent" title="Azure SQL Auditing Configuration" alt="Azure SQL Auditing Configuration" class="MCXref xref">Azure SQL Auditing Configuration</a> topic and the <a href="../../../Requirements/Target/Config/DatabaseAzureSQL.htm" target="_parent" title="AzureSQL Target Least Privilege Model" alt="AzureSQL Target Least Privilege Model" class="MCXref xref">AzureSQL Target Least Privilege Model</a> topic for additional information.</p>
                                        <p class="Bold_Subheading">Sensitive Data Discovery Considerations</p>
                                        <p>If running Sensitive Data Discovery (SDD) scans, it will be necessary to increase the minimum amount of RAM. Each thread requires a minimum of 2 additional GB of RAM per host. For example, if the job is configured to scan 8 hosts at a time , then an extra 16 GB of RAM are required (8x2=16).</p>
                                        <h2>SQL Query Configuration</h2>
                                        <p>The SQL Data Collector is configured through the SQL Data Collector Wizard. The wizard contains the following pages, which change based upon the query category selected:</p>
                                        <p class="Note-1" data-mc-autonum="&lt;b&gt;NOTE: &lt;/b&gt;"><span class="autonumber"><span class="Note"><b>NOTE: </b></span></span>The SQL&#160;Data Collector is used in multiple <span class="mc-variable SA.Product_Short_Name variable">Access Analyzer</span>&#160;Solutions, and the query categories used are dependent on the solution. </p>
                                        <ul>
                                            <li>
                                                <p><a href="Category.htm" target="_parent" title="SQL: Category" alt="SQL: Category" class="MCXref xref">SQL:&#160;Category</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Options.htm" target="_parent" title="SQL: Options" alt="SQL: Options" class="MCXref xref">SQL:&#160;Options</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Criteria.htm" target="_parent" title="SQL: Criteria" alt="SQL: Criteria" class="MCXref xref">SQL:&#160;Criteria</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Filter.htm" target="_parent" title="SQL: Filter" alt="SQL: Filter" class="MCXref xref">SQL:&#160;Filter</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Settings.htm" target="_parent" title="SQL: Settings" alt="SQL: Settings" class="MCXref xref">SQL:&#160;Settings</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="CustomQuerySQL.htm" title="SQL: Custom SQL Query" alt="SQL: Custom SQL Query" target="_parent" class="MCXref xref">SQL:&#160;Custom SQL Query</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="CustomQueryOracle.htm" title="SQL: Custom Oracle Query" alt="SQL: Custom Oracle Query" target="_parent" class="MCXref xref">SQL:&#160;Custom Oracle Query</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Results.htm" title="SQL: Results" alt="SQL: Results" target="_parent" class="MCXref xref">SQL:&#160;Results</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Rowkey.htm" title="SQL: Rowkey" alt="SQL: Rowkey" target="_parent" class="MCXref xref">SQL:&#160;Rowkey</a>
                                                </p>
                                            </li>
                                            <li>
                                                <p><a href="Summary.htm" title="SQL: Summary" alt="SQL: Summary" target="_parent" class="MCXref xref">SQL:&#160;Summary</a>
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>